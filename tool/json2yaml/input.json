{
  "status": "success",
  "data": {
    "groups": [
      {
        "name": "business.bigdata",
        "file": "/thanos-prometheus/config/rules/business/bigdata.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "DataView_API指标停止",
            "query": "sum by(exported_job) (abs(delta(AiScreen_DataView_API[2m]))) == 0",
            "duration": 60,
            "labels": {
              "alertname": "DataView_API指标停止",
              "type": "business.bigdata"
            },
            "annotations": {
              "description": "DataView_API指标 {{ $labels.exported_job }} 数据停止，ROC数据源异常，涉及视频播放计时，距离，面部计数，QA计数，服务时长等数据",
              "key": "business.bigdata.dataview_api_constant_all",
              "summary": "DataView_API指标 {{ $labels.exported_job }} 数据停止，ROC数据源异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004898557,
            "lastEvaluation": "2021-04-21T11:07:28.926760128+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DataView_API指标出现变动",
            "query": "delta(AiScreen_DataView_API[2m]) / (AiScreen_DataView_API offset 2m) >= 1 or delta(AiScreen_DataView_API[2m]) < 0",
            "duration": 60,
            "labels": {
              "alertname": "DataView_API指标出现变动",
              "type": "business.bigdata"
            },
            "annotations": {
              "description": "DataView_API指标 {{ $labels.label }} 出现剧增或缩减,变动值 {{ $value }}",
              "key": "business.bigdata.dataview_api_change",
              "summary": "DataView_API指标 {{ $labels.label }} 出现剧增或缩减",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005050625,
            "lastEvaluation": "2021-04-21T11:07:28.915670146+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DataView_API指标连续20次未变动",
            "query": "delta(AiScreen_DataView_API[10m]) == 0",
            "duration": 60,
            "labels": {
              "alertname": "DataView_API指标连续20次未变动",
              "type": "business.bigdata"
            },
            "annotations": {
              "description": "DataView_API指标{{ $labels.label }} 连续20次未产生变动",
              "key": "business.bigdata.dataview_api_constant",
              "summary": "DataView_API指标{{ $labels.label }} 连续20次未产生变动",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.023169659,
            "lastEvaluation": "2021-04-21T11:07:28.892496862+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DataView_BK指标出现变动",
            "query": "delta(AiScreen_DataView_BK[2m]) != 0",
            "duration": 60,
            "labels": {
              "alertname": "DataView_BK指标出现变动",
              "type": "business.bigdata"
            },
            "annotations": {
              "description": "Dataview_BK指标{{ $labels.label }} 出现变动,变动值{{ $value }}",
              "key": "business.bigdata.dataview_bk_change",
              "summary": "Dataview_BK指标{{ $labels.label }} 出现变动",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006032446,
            "lastEvaluation": "2021-04-21T11:07:28.920724228+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "business.cloudia",
        "file": "/thanos-prometheus/config/rules/business/cloudia.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "Cloudia-fe-mail 请求http状态码 5xx",
            "query": "delta(nginx_vts_server_requests_total{app_kubernetes_io_name=\"cloudia\",code=\"5xx\"}[1m]) > 0",
            "duration": 0,
            "labels": {
              "alertname": "Cloudia-fe-mail 请求http状态码 5xx",
              "type": "business.cloudia"
            },
            "annotations": {
              "description": "Cloudia fe mail 请求 {{ $labels.host }} 站点5xx状态异常,当前值{{ $value }}",
              "key": "business.cloudia.femall.http5xx",
              "summary": "Cloudia fe mail 请求 {{ $labels.host }} 站点5xx状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007814076,
            "lastEvaluation": "2021-04-21T11:07:34.272091958+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Cloudia-fe-mail容器CrashLoopBackOff",
            "query": "delta(kube_pod_container_status_waiting_reason{container=\"cloudia-fe-mall\",reason=\"CrashLoopBackOff\"}[5m]) > 0",
            "duration": 5,
            "labels": {
              "alertname": "Cloudia-fe-mail容器CrashLoopBackOff",
              "type": "business.cloudia"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace}} 容器 {{ $labels.pod }} 过去5分钟处于容器状态CrashLoopBackOff状态{{ $value }}，预期值0",
              "key": "business.cloudia.container",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod }} 过去10分钟处于容器状态CrashLoopBackOff状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003911758,
            "lastEvaluation": "2021-04-21T11:07:34.268176141+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "business.smartvoice",
        "file": "/thanos-prometheus/config/rules/business/smartvoice.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "SmartVoice三方技能耗时",
            "query": "histogram_quantile(1, sum by(le, domain) (rate(smartvoice_main_skill_duration_ms_bucket{cloud_cluster=\"cloud-prod-1\",domain=~\"stock|currency|airport|translate|music|food|trafficrestr|times|around|constellation|twister\",kubernetes_namespace=\"smartvoice-iv-v2\"}[1m]))) > 1000",
            "duration": 0,
            "labels": {
              "alertname": "SmartVoice三方技能耗时",
              "type": "business.smartvoice"
            },
            "annotations": {
              "description": "SmartVoice生产环境三方技能{{ $labels.domain }}执行耗时耗时大于1s,当前值{{ $value | printf \"%s.2f\" }}",
              "key": "business.smartvoice.thirdskill",
              "summary": "SmartVoice生产环境三方技能{{ $labels.domain }}耗时告警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.030178215,
            "lastEvaluation": "2021-04-21T11:07:38.435563973+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "SmartVoice用户QA耗时",
            "query": "histogram_quantile(1, sum by(le, service) (rate(smartvoice_main_dm_service_cost_bucket{cloud_cluster=~\"cloud-prod-1\",kubernetes_namespace=\"smartvoice-iv-v2\",service=~\"user_qa|common_sense_qa\"}[1m]))) > 1000",
            "duration": 0,
            "labels": {
              "alertname": "DM服务耗时",
              "type": "business.smartvoice"
            },
            "annotations": {
              "description": "SmartVoice生产环境用户QA{{ $labels.service }}类型耗时大于1s,当前值{{ $value | printf \"%s.2f\" }}",
              "key": "business.smartvoice.dm_delay",
              "summary": "SmartVoice生产环境用户QA{{ $labels.service }}类型耗时告警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.016673891,
            "lastEvaluation": "2021-04-21T11:07:38.418885462+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "SmartVoice用户闲聊耗时",
            "query": "histogram_quantile(1, sum by(le, service) (rate(smartvoice_main_dm_service_cost_bucket{cloud_cluster=~\"cloud-prod-1\",kubernetes_namespace=\"smartvoice-iv-v2\",service=\"user_chitchat\"}[1m]))) > 2000",
            "duration": 0,
            "labels": {
              "alertname": "DM服务耗时",
              "type": "business.smartvoice"
            },
            "annotations": {
              "description": "SmartVoice生产环境用户闲聊{{ $labels.service }}类型耗时大于2s,当前值{{ $value | printf \"%s.2f\" }}",
              "key": "business.smartvoice.chichat_delay",
              "summary": "SmartVoice生产环境用户闲聊{{ $labels.service }}类型耗时告警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006725722,
            "lastEvaluation": "2021-04-21T11:07:38.465745634+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "第三方API失败",
            "query": "delta(smartvoice_services_third_api_failed_total{cloud_cluster=~\"cloud-sit.*\"}[1m]) >= 1",
            "duration": 0,
            "labels": {
              "alertname": "第三方API失败",
              "type": "business.smartvoice"
            },
            "annotations": {
              "description": "SmartVoice生产环境第三方接口{{ $labels.api }}失败,当前值{{ $value | printf \"%s.2f\" }}",
              "key": "business.smartvoice.third_error",
              "summary": "Kubernetes集群{{ $labels.cloud_cluster }}内第三方{{ $labels.api }}失败大与10次",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004087548,
            "lastEvaluation": "2021-04-21T11:07:38.472474182+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "第三方API耗时",
            "query": "histogram_quantile(0.99, sum by(le, api, kubernetes_namespace, kubernetes_pod_name) (rate(smartvoice_services_third_api_execute_duration_ms_bucket{cloud_cluster=~\"cloud-prod.*\"}[1m]))) / 1000 >= 1",
            "duration": 0,
            "labels": {
              "alertname": "第三方API耗时",
              "type": "business.smartvoice"
            },
            "annotations": {
              "description": "SmartVoice生产环境第三方接口{{ $labels.api }}耗时大于4s,当前值{{ $value | printf \"%s.2f\" }}",
              "key": "business.smartvoice.third_delay",
              "summary": "Kubernetes集群{{ $labels.cloud_cluster }}内第三方{{ $labels.api }}耗时大于4s",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.035275379,
            "lastEvaluation": "2021-04-21T11:07:38.4765649+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "kubernetes.containers",
        "file": "/thanos-prometheus/config/rules/kubernetes/containers.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "容器CPU使用核数",
            "query": "rate(container_cpu_usage_seconds_total{image!=\"\",namespace!=\"\"}[2m]) > 5",
            "duration": 300,
            "labels": {
              "alertname": "容器CPU使用核数",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name}} CPU使用大于5核心,当前值{{ $value | printf \"%.2f\" }}",
              "key": "kubernetes.containers.cpu_used",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name}} CPU使用大于5核心",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.102705978,
            "lastEvaluation": "2021-04-21T11:07:43.675996465+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器CPU使用率",
            "query": "sum by(cloud_cluster, namespace, pod_name, container_name) (rate(container_cpu_usage_seconds_total{cloud_cluster=~\"cloud.*\",container_name!=\"\",container_name!=\"POD\"}[5m])) / (sum by(cloud_cluster, namespace, pod_name, container_name) (container_spec_cpu_quota{cloud_cluster=~\"cloud.*\",container_name!=\"\",container_name!=\"POD\"}) / 100000) * 100 >= 85 and on() hour() > 0 < 16",
            "duration": 60,
            "labels": {
              "alertname": "容器CPU使用率",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name }} CPU使用过高，当前值{{ $value| printf \"%.2f\" }}%",
              "key": "kubrnetes.container.cpu.usage",
              "summary": "集群 {{$labels.cloud_cluster}} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name }} CPU使用过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.257696697,
            "lastEvaluation": "2021-04-21T11:07:46.320252366+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器OOM Killer",
            "query": "kubernete_docker_oom_killed == 1",
            "duration": 0,
            "labels": {
              "alertname": "容器OOM Killer",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod }} 在主机 {{ $labels.node_ip }} 上发生OOM,状态{{ $value }}",
              "key": "kubernetes.container.oom.fatal",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod }} 在主机 {{ $labels.node_ip }} 上发生OOM",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003890387,
            "lastEvaluation": "2021-04-21T11:07:51.112095079+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器内存使用率",
            "query": "container_memory_usage_bytes{pod_name!=\"\"} / container_spec_memory_limit_bytes{pod_name!=\"\"} * 100 != +Inf > 100",
            "duration": 300,
            "labels": {
              "alertname": "容器内存使用率",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器{{ $labels.pod_name}} 内存使用率操作limit,当前值{{ $value | printf \"%.2f\" }}",
              "key": "kubernetes.containers.memory_rate",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name}} 内存使用率操作limit",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.183467687,
            "lastEvaluation": "2021-04-21T11:07:45.136778185+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器内存占用",
            "query": "(container_memory_rss{image!=\"\",namespace!=\"\"}) / 1024 / 1024 / 1024 > 50",
            "duration": 3600,
            "labels": {
              "alertname": "容器内存占用",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name}} 内存使用大于50GB,当前值{{ $value | printf \"%.2f\" }}GB",
              "key": "kubernetes.containers.memory_used",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod_name}} 内存使用大于50GB",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.249610167,
            "lastEvaluation": "2021-04-21T11:07:40.771782411+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器持续Creating",
            "query": "delta(kube_pod_container_status_waiting_reason{reason=\"ContainerCreating\"}[10m]) > 0",
            "duration": 900,
            "labels": {
              "alertname": "容器持续Creating",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Createing状态,{{ $value }}",
              "key": "kubernetes.containers.status_creating",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Createing状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.353078553,
            "lastEvaluation": "2021-04-21T11:07:42.021399552+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态ContainerCannotRun",
            "query": "delta(kube_pod_container_status_terminated_reason{reason=\"ContainerCannotRun\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态ContainerCannotRun",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod }} 过去10分钟处于容器状态ContainerCannotRun状态{{ $value }}次",
              "key": "kubernetes.containers.status_containercannotrun",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod }} 过去10分钟处于容器状态ContainerCannotRun状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.833648731,
            "lastEvaluation": "2021-04-21T11:07:48.662763951+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "容器状态CrashLoopBackOff",
            "query": "delta(kube_pod_container_status_waiting_reason{reason=\"CrashLoopBackOff\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态CrashLoopBackOff",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod }} 过去10分钟处于容器状态CrashLoopBackOff状态,{{ $value }}",
              "key": "kubernetes.containers.status_crashloopbackoff",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod }} 过去10分钟处于容器状态CrashLoopBackOff状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "容器状态CrashLoopBackOff",
                  "app_kubernetes_io_name": "kube-state-metrics",
                  "cloud_cluster": "cloud-sit-1",
                  "container": "fras-task",
                  "instance": "10.156.61.209:8080",
                  "job": "kubernetes-service-endpoints",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitoring",
                  "namespace": "jindi-cv-face",
                  "pod": "fras-task-8598d95c79-zb26c",
                  "prometheus": "standard",
                  "reason": "CrashLoopBackOff",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 jindi-cv-face 容器 fras-task-8598d95c79-zb26c 过去10分钟处于容器状态CrashLoopBackOff状态,1.0256410256410255",
                  "key": "kubernetes.containers.status_crashloopbackoff",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 jindi-cv-face 容器 fras-task-8598d95c79-zb26c 过去10分钟处于容器状态CrashLoopBackOff状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:06:10.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态CrashLoopBackOff",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "cms-mark-portal",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "smartomp-cloudpepper-v3-uit",
                  "pod": "stable-cms-mark-portal-7b4499d6c6-74hwt",
                  "prometheus": "standard",
                  "reason": "CrashLoopBackOff",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 smartomp-cloudpepper-v3-uit 容器 stable-cms-mark-portal-7b4499d6c6-74hwt 过去10分钟处于容器状态CrashLoopBackOff状态,1.0256410256410255",
                  "key": "kubernetes.containers.status_crashloopbackoff",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 smartomp-cloudpepper-v3-uit 容器 stable-cms-mark-portal-7b4499d6c6-74hwt 过去10分钟处于容器状态CrashLoopBackOff状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:07:40.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态CrashLoopBackOff",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-maes",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-maes-965f6cf97-kdbpz",
                  "prometheus": "standard",
                  "reason": "CrashLoopBackOff",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-maes-965f6cf97-kdbpz 过去10分钟处于容器状态CrashLoopBackOff状态,1.0256410256410255",
                  "key": "kubernetes.containers.status_crashloopbackoff",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-maes-965f6cf97-kdbpz 过去10分钟处于容器状态CrashLoopBackOff状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:07:10.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 2.084805908,
            "lastEvaluation": "2021-04-21T11:07:46.577952464+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态CreateContainerConfigError",
            "query": "delta(kube_pod_container_status_waiting_reason{reason=\"CreateContainerConfigError\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态CreateContainerConfigError",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于CreateContainerConfigError状态，{{ $value }}",
              "key": "kubernetes.containers.status_createcontainerconfigerror",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于CreateContainerConfigError状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.290462884,
            "lastEvaluation": "2021-04-21T11:07:40.481313971+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "容器状态ErrImagePull",
            "query": "delta(kube_pod_container_status_waiting_reason{reason=\"ErrImagePull\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态ErrImagePull",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于ErrImagePull状态,{{ $value }}",
              "key": "kubernetes.containers.status_errimagepull",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于ErrImagePull状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "容器状态ErrImagePull",
                  "app_kubernetes_io_name": "kube-state-metrics",
                  "cloud_cluster": "cloud-sit-1",
                  "container": "emqx",
                  "instance": "10.156.61.209:8080",
                  "job": "kubernetes-service-endpoints",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitoring",
                  "namespace": "harix-v3-144",
                  "pod": "harix-emqx-1",
                  "prometheus": "standard",
                  "reason": "ErrImagePull",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 harix-v3-144 容器 harix-emqx-1 过去10分钟处于ErrImagePull状态,1.0256410256410255",
                  "key": "kubernetes.containers.status_errimagepull",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 harix-v3-144 容器 harix-emqx-1 过去10分钟处于ErrImagePull状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:07:40.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.30830164,
            "lastEvaluation": "2021-04-21T11:07:43.367689442+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态Error",
            "query": "delta(kube_pod_container_status_terminated_reason{reason=\"Error\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态Error",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Error状态,{{ $value }}",
              "key": "kubernetes.containers.status_error",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Error状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.358064373,
            "lastEvaluation": "2021-04-21T11:07:44.778708147+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态ImagePullBackOff",
            "query": "delta(kube_pod_container_status_waiting_reason{reason=\"ImagePullBackOff\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态ImagePullBackOff",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于ImagePullBackOff状态,{{ $value }}",
              "key": "kubernetes.containers.status_imagepullbackoff",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于ImagePullBackOff状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.294315554,
            "lastEvaluation": "2021-04-21T11:07:42.830179508+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态OOMKilled",
            "query": "kube_pod_container_status_terminated_reason{reason=\"OOMKilled\"} > 0",
            "duration": 0,
            "labels": {
              "alertname": "容器状态OOMKilled",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于OOMKilled状态{{ $value }}次",
              "key": "kubernetes.containers.status_oomkilled",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于OOMKilled状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.243183706,
            "lastEvaluation": "2021-04-21T11:07:43.12450158+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "容器状态Restart",
            "query": "delta(kube_pod_container_status_restarts_total[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态Restart",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于restart状态{{ $value }}次",
              "key": "kubernetes.containers.restart_fatal",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于restart状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-usms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-usms-67b4c46ffd-25bxv",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-usms-67b4c46ffd-25bxv 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-usms-67b4c46ffd-25bxv 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-upms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-upms-746c57964c-z65kw",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-upms-746c57964c-z65kw 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-upms-746c57964c-z65kw 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-usms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-usms-566fc8c7-gnd8b",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-usms-566fc8c7-gnd8b 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-usms-566fc8c7-gnd8b 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-job-admin",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-job-admin-bd4898578-xstxq",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-job-admin-bd4898578-xstxq 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-job-admin-bd4898578-xstxq 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:14:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "cms-mark-portal",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "smartomp-cloudpepper-v3-uit",
                  "pod": "stable-cms-mark-portal-7b4499d6c6-74hwt",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 smartomp-cloudpepper-v3-uit 容器 stable-cms-mark-portal-7b4499d6c6-74hwt 过去10分钟处于restart状态1.0256410256410255次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 smartomp-cloudpepper-v3-uit 容器 stable-cms-mark-portal-7b4499d6c6-74hwt 过去10分钟处于restart状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-cxms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-cxms-599b549894-4wzcw",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-cxms-599b549894-4wzcw 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-cxms-599b549894-4wzcw 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-mams",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-mams-546496f94-qtxct",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-mams-546496f94-qtxct 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-mams-546496f94-qtxct 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:57:10.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-task-api",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-task-api-8484bf85d7-7qj2z",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-task-api-8484bf85d7-7qj2z 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-task-api-8484bf85d7-7qj2z 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:57:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-reception",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-reception-6f4c78d55d-9dm2f",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-reception-6f4c78d55d-9dm2f 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-reception-6f4c78d55d-9dm2f 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:56:10.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-uses",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-uses-69f6f5c597-ntlvb",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-uses-69f6f5c597-ntlvb 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-uses-69f6f5c597-ntlvb 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-mobile-gateway",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-mobile-gateway-75764fdff7-bvj5s",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-mobile-gateway-75764fdff7-bvj5s 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-mobile-gateway-75764fdff7-bvj5s 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-upms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-upms-98b6cdf54-hnzsv",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-upms-98b6cdf54-hnzsv 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-upms-98b6cdf54-hnzsv 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-auth",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-auth-7f9c8d4cbf-lvq2h",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-auth-7f9c8d4cbf-lvq2h 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-auth-7f9c8d4cbf-lvq2h 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-gateway",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-gateway-54f8bb5f8f-hq6jq",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-gateway-54f8bb5f8f-hq6jq 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-gateway-54f8bb5f8f-hq6jq 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:16:10.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "smartvoice-wordseg",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "smartvoice-cloudpepper-v3-138",
                  "pod": "stable-smartvoice-wordseg-7595848f87-gkttx",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 smartvoice-cloudpepper-v3-138 容器 stable-smartvoice-wordseg-7595848f87-gkttx 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 smartvoice-cloudpepper-v3-138 容器 stable-smartvoice-wordseg-7595848f87-gkttx 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "app_kubernetes_io_name": "kube-state-metrics",
                  "cloud_cluster": "cloud-sit-1",
                  "container": "kong",
                  "instance": "10.156.61.209:8080",
                  "job": "kubernetes-service-endpoints",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitoring",
                  "namespace": "kong",
                  "pod": "kong-d85986fc-nxnzs",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 kong 容器 kong-d85986fc-nxnzs 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 kong 容器 kong-d85986fc-nxnzs 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T10:22:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "nlp-classify",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "nlp-cloudpepper-v3-fit",
                  "pod": "stable-nlp-classify-78496bf556-575dk",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 nlp-cloudpepper-v3-fit 容器 stable-nlp-classify-78496bf556-575dk 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 nlp-cloudpepper-v3-fit 容器 stable-nlp-classify-78496bf556-575dk 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T08:49:10.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "app_kubernetes_io_name": "kube-state-metrics",
                  "cloud_cluster": "cloud-sit-1",
                  "container": "fras-task",
                  "instance": "10.156.61.209:8080",
                  "job": "kubernetes-service-endpoints",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitoring",
                  "namespace": "jindi-cv-face",
                  "pod": "fras-task-8598d95c79-zb26c",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 jindi-cv-face 容器 fras-task-8598d95c79-zb26c 过去10分钟处于restart状态1.0256410256410255次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 jindi-cv-face 容器 fras-task-8598d95c79-zb26c 过去10分钟处于restart状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T10:20:40.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "app_kubernetes_io_name": "kube-state-metrics",
                  "cloud_cluster": "cloud-sit-1",
                  "container": "kong-ingress-controller",
                  "instance": "10.156.61.209:8080",
                  "job": "kubernetes-service-endpoints",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitoring",
                  "namespace": "kong",
                  "pod": "kong-d85986fc-nxnzs",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 kong 容器 kong-d85986fc-nxnzs 过去10分钟处于restart状态1.0256410256410255次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 kong 容器 kong-d85986fc-nxnzs 过去10分钟处于restart状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T10:19:10.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-qa",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-qa-7dd75d85cb-74mq9",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-qa-7dd75d85cb-74mq9 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-qa-7dd75d85cb-74mq9 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:55:10.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-maes",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-maes-965f6cf97-kdbpz",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-maes-965f6cf97-kdbpz 过去10分钟处于restart状态1.0256410256410255次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-maes-965f6cf97-kdbpz 过去10分钟处于restart状态",
                  "trigger": "1.0256410256410255"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:56:40.481121982Z",
                "value": "1.0256410256410255e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-cxms",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-uit",
                  "pod": "stable-crss-cxms-7bc4d6f4d7-b5z4d",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-cxms-7bc4d6f4d7-b5z4d 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-uit 容器 stable-crss-cxms-7bc4d6f4d7-b5z4d 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器状态Restart",
                  "cloud_cluster": "cloud-sit-2",
                  "container": "crss-cds",
                  "instance": "10.244.20.196:8080",
                  "job": "kubernetes-service-endpoints",
                  "k8s_app": "kube-state-metrics",
                  "kubernetes_name": "kube-state-metrics",
                  "kubernetes_namespace": "monitor",
                  "namespace": "crss-plus-dit",
                  "pod": "stable-crss-cds-7cc84b594f-5s6pp",
                  "prometheus": "standard",
                  "type": "kubernetes.containers"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-cds-7cc84b594f-5s6pp 过去10分钟处于restart状态2.051282051282051次",
                  "key": "kubernetes.containers.restart_fatal",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-dit 容器 stable-crss-cds-7cc84b594f-5s6pp 过去10分钟处于restart状态",
                  "trigger": "2.051282051282051"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T03:51:40.481121982Z",
                "value": "2.051282051282051e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.297054995,
            "lastEvaluation": "2021-04-21T11:07:50.815034487+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器状态Unknown",
            "query": "delta(kube_pod_status_phase{phase=\"Unknown\"}[10m]) > 0",
            "duration": 180,
            "labels": {
              "alertname": "容器状态Unknown",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Unknown状态{{ $value }}次",
              "key": "kubernetes.containers.status_unknown",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 过去10分钟处于Unknown状态",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.318608437,
            "lastEvaluation": "2021-04-21T11:07:50.49641927+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器网络延迟",
            "query": "kubernete_tcp_outer_delay > 100 or kubernete_tcp_delay > 100",
            "duration": 60,
            "labels": {
              "alertname": "容器网络延迟",
              "type": "kubernetes.containers"
            },
            "annotations": {
              "description": "Kubernetes集群{{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 网络延迟 > 100ms,当前值 {{ $value }}",
              "key": "kubernetes.containers.network_delay",
              "summary": "Kubernetes集群{{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 网络延迟 > 100ms",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.455692678,
            "lastEvaluation": "2021-04-21T11:07:42.374481164+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "kubernetes.kubelet",
        "file": "/thanos-prometheus/config/rules/kubernetes/kubelet.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "容器节点DiskPressure状态",
            "query": "sum by(node, cloud_cluster) (kube_node_status_condition{condition=\"DiskPressure\",status=\"true\"}) == 1",
            "duration": 300,
            "labels": {
              "alertname": "容器节点DiskPressure状态",
              "type": "kubernetes.kubelet"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} DiskPressure状态异常,状态{{ $value }},预期0",
              "key": "kubernetes.kubelet.status_diskpressure",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} DiskPressure状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.00836516,
            "lastEvaluation": "2021-04-21T11:07:26.881194777+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器节点MemoryPressure状态",
            "query": "sum by(node, cloud_cluster) (kube_node_status_condition{condition=\"MemoryPressure\",status=\"true\"}) == 1",
            "duration": 300,
            "labels": {
              "alertname": "容器节点MemoryPressure状态",
              "type": "kubernetes.kubelet"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} MemoryPressure状态异常,状态{{ $value }},预期0",
              "key": "kubernetes.kubelet.status_memorypressure",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} MemoryPressure状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.094355991,
            "lastEvaluation": "2021-04-21T11:07:26.889565543+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器节点OutOfDisk状态",
            "query": "sum by(node, cloud_cluster) (kube_node_status_condition{condition=\"OutOfDisk\",status=\"false\"}) == 0",
            "duration": 60,
            "labels": {
              "alertname": "容器节点OutOfDisk状态",
              "type": "kubernetes.kubelet"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} OutOfDisk状态异常,状态{{ $value }},预期1",
              "key": "kubernetes.kubelet.status_outofdisk",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} OutOfDisk状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007457543,
            "lastEvaluation": "2021-04-21T11:07:26.983926247+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器节点PIDPressure状态",
            "query": "sum by(node, cloud_cluster) (kube_node_status_condition{condition=\"PIDPressure\",status=\"true\"}) == 1",
            "duration": 60,
            "labels": {
              "alertname": "容器节点PIDPressure状态",
              "type": "kubernetes.kubelet"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} PIDPressure状态异常, 状态{{ $value }},预期0",
              "key": "kubernetes.kubelet.status_pidpressure",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} PIDPressure状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.074096635,
            "lastEvaluation": "2021-04-21T11:07:26.807088732+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "容器节点Ready状态",
            "query": "sum by(node, cloud_cluster) (kube_node_status_condition{condition=\"Ready\",status=\"true\"}) == 0",
            "duration": 300,
            "labels": {
              "alertname": "容器节点Ready状态",
              "type": "kubernetes.kubelet"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} Ready状态异常,状态{{ $value }},预期1",
              "key": "kubernetes.kubelet.status_ready",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器节点 {{ $labels.node }} Ready状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "容器节点Ready状态",
                  "cloud_cluster": "cloud-prod-1",
                  "node": "l-172016031010-ops.cloudminds.com",
                  "type": "kubernetes.kubelet"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-prod-1 容器节点 l-172016031010-ops.cloudminds.com Ready状态异常,状态0,预期1",
                  "key": "kubernetes.kubelet.status_ready",
                  "summary": "Kubernetes集群 cloud-prod-1 容器节点 l-172016031010-ops.cloudminds.com Ready状态异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-04-17T02:55:56.806733364Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.092844127,
            "lastEvaluation": "2021-04-21T11:07:26.99138687+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "kubernetes.network",
        "file": "/thanos-prometheus/config/rules/kubernetes/network.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "容器Close_Wait状态",
            "query": "K8S_DOCKER_TCP_CONNECT_STATUS{status=\"CLOSE_WAIT\"} > 200",
            "duration": 60,
            "labels": {
              "alertname": "容器Close_Wait状态",
              "type": "kubernetes.network"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod_name }} CLOSE_WAIT异常,数量{{ $value }}个",
              "key": "kubernetes.network.close_wait",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod_name}} CLOSE_WAIT异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.561563128,
            "lastEvaluation": "2021-04-21T11:07:47.464179951+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器内网延迟",
            "query": "kubernete_tcp_delay > 500",
            "duration": 300,
            "labels": {
              "alertname": "容器内网延迟",
              "type": "kubernetes.network"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 内网延迟预警，当前 {{ $value | printf \"%.2f\" }}ms",
              "key": "kubernetes.network.inerdelay",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 内网延迟预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.237450208,
            "lastEvaluation": "2021-04-21T11:07:46.226722684+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器外网延迟",
            "query": "kubernete_tcp_outer_delay > 800",
            "duration": 300,
            "labels": {
              "alertname": "容器外网延迟",
              "type": "kubernetes.network"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 外网延迟预警，当前 {{ $value | printf \"%.2f\" }}ms",
              "key": "kubernetes.network.outerdelay",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 容器 {{ $labels.exported_instance }} 外网延迟预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 1.061572504,
            "lastEvaluation": "2021-04-21T11:07:45.165143311+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "kubernetes.pvc",
        "file": "/thanos-prometheus/config/rules/kubernetes/pvc.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "容器pvc_inode使用率",
            "query": "kubelet_volume_stats_inodes_used{cloud_cluster=~\"cloud-prod.*\"} / kubelet_volume_stats_inodes{cloud_cluster=~\"cloud-prod.*\"} * 100 > 90",
            "duration": 43200,
            "labels": {
              "alertname": "容器pvc_inode使用率",
              "type": "kubernetes.pvc"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 磁盘 {{ $labels.persistentvolumeclaim}} Inode使用率预警,当前使用率 {{ $value | printf \"%.2f\" }}%",
              "key": "kubernetes.pvc.inode_rate",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 磁盘 {{ $labels.persistentvolumeclaim}} Inode使用率预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.078205725,
            "lastEvaluation": "2021-04-21T11:07:49.819886977+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器pvc_inode未来48小时满额预测",
            "query": "predict_linear(kubelet_volume_stats_inodes_free[2h], 48 * 3600) < 0",
            "duration": 43200,
            "labels": {
              "alertname": "容器pvc_inode未来48小时满额预测",
              "type": "kubernetes.pvc"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 设备 {{ $labels.persistentvolumeclaim }} inode未来24小时满额预警, 可能超出{{ $value | printf \"%.2f\" }}",
              "key": "nodes.disk.pvc.inode_predict_linear",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 设备 {{ $labels.persistentvolumeclaim }} inode未来24小时满额预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.713059377,
            "lastEvaluation": "2021-04-21T11:07:49.898095757+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "容器pvc使用率",
            "query": "kubernete_pvc_used * 100 > 90",
            "duration": 600,
            "labels": {
              "alertname": "容器pvc使用率",
              "type": "kubernetes.pvc"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod_name }} 磁盘 {{ $labels.pvc}} 设备 {{ $labels.volume }} 使用率预警,当前 {{ $value | printf \"%.2f\" }}%",
              "key": "kubernetes.pvc.volume_rate",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.pod_namespace }} 容器 {{ $labels.pod_name }} 磁盘 {{ $labels.pvc }} 设备 {{ $labels.volume }} 使用率预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.757153509,
            "lastEvaluation": "2021-04-21T11:07:49.062727349+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "容器pvc未来48小时满额预测",
            "query": "predict_linear(kubelet_volume_stats_available_bytes[2h], 48 * 3600) / 1024 / 1024 / 1024 < 0",
            "duration": 43200,
            "labels": {
              "alertname": "容器pvc未来48小时满额预测",
              "type": "kubernetes.pvc"
            },
            "annotations": {
              "description": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 设备 {{ $labels.persistentvolumeclaim }} 未来24小时满额预警, 可能超出{{ $value | printf \"%.2f\" }}GB",
              "key": "nodes.disk.pvc.predict_linear",
              "summary": "Kubernetes集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 设备 {{ $labels.persistentvolumeclaim }} 未来24小时满额预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_dit_87": "bj-dit-87",
                  "app_kubernetes_io_xaaszone_bj_sit_138": "bj-sit-138",
                  "app_kubernetes_io_xaaszone_newton_dev": "newton-dev",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-2",
                  "instance": "l-172016023028-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023028-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "bj-dit-87",
                  "namespace": "monitor",
                  "omaRocDm": "dit",
                  "persistentvolumeclaim": "prometheus-middleware-metrics",
                  "prometheus": "standard",
                  "run_ue4_new": "87dit334",
                  "sgx_node": "true",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 monitor 设备 prometheus-middleware-metrics 未来24小时满额预警, 可能超出-14.64GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 monitor 设备 prometheus-middleware-metrics 未来24小时满额预警",
                  "trigger": "-14.637830412018555"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:46:17.326015946Z",
                "value": "-1.4637830412018555e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_dit_87": "bj-dit-87",
                  "app_kubernetes_io_xaaszone_bj_sit_138": "bj-sit-138",
                  "app_kubernetes_io_xaaszone_newton_dev": "newton-dev",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-2",
                  "instance": "l-172016023028-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023028-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "bj-dit-87",
                  "namespace": "lpc-baas-dit",
                  "omaRocDm": "dit",
                  "persistentvolumeclaim": "geth-pvc-027941b20d6c719",
                  "prometheus": "standard",
                  "run_ue4_new": "87dit334",
                  "sgx_node": "true",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 lpc-baas-dit 设备 geth-pvc-027941b20d6c719 未来24小时满额预警, 可能超出-1.28GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 lpc-baas-dit 设备 geth-pvc-027941b20d6c719 未来24小时满额预警",
                  "trigger": "-1.2832411981066218"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:30:47.326015946Z",
                "value": "-1.2832411981066218e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_uit_85": "bj-uit-85",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-2",
                  "instance": "l-172016023091-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023091-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "beijing-demo",
                  "namespace": "monitor",
                  "persistentvolumeclaim": "prometheus-metrics",
                  "prometheus": "standard",
                  "run_ue4_new": "86fit335",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 monitor 设备 prometheus-metrics 未来24小时满额预警, 可能超出-111.80GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 monitor 设备 prometheus-metrics 未来24小时满额预警",
                  "trigger": "-111.79945914832038"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:47:17.326015946Z",
                "value": "-1.1179945914832038e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_dit_87": "bj-dit-87",
                  "app_kubernetes_io_xaaszone_bj_fit_86": "bj-fit-86",
                  "app_kubernetes_io_xaaszone_bj_sit_138": "bj-sit-138",
                  "app_kubernetes_io_xaaszone_bj_uit_85": "bj-uit-85",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-2",
                  "instance": "l-172016023082-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023082-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "fit-beijing",
                  "namespace": "lpc-baas-dit",
                  "persistentvolumeclaim": "geth-pvc-02baaa675989edb",
                  "prometheus": "standard",
                  "tencent_com_vcuda": "true",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 lpc-baas-dit 设备 geth-pvc-02baaa675989edb 未来24小时满额预警, 可能超出-1.35GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 lpc-baas-dit 设备 geth-pvc-02baaa675989edb 未来24小时满额预警",
                  "trigger": "-1.3531497655428129"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:12:47.326015946Z",
                "value": "-1.3531497655428129e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_sit_144": "bj-sit-144",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-1",
                  "instance": "l-172016023024-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023024-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "beijing-144",
                  "namespace": "monitor",
                  "omaRocDm": "sit144",
                  "persistentvolumeclaim": "prometheus-metrics",
                  "prometheus": "standard",
                  "run_ue4": "sit144",
                  "run_ue4_new": "sit144",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-1 命名空间 monitor 设备 prometheus-metrics 未来24小时满额预警, 可能超出-27.52GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-1 命名空间 monitor 设备 prometheus-metrics 未来24小时满额预警",
                  "trigger": "-27.519023418288135"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:50:17.326015946Z",
                "value": "-2.7519023418288135e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "容器pvc未来48小时满额预测",
                  "app_kubernetes_io_xaaszone_bj_fit_86": "bj-fit-86",
                  "app_kubernetes_io_xaaszone_bj_sit_138": "bj-sit-138",
                  "app_kubernetes_io_xaaszone_zhouyi_dev": "zhouyi-dev",
                  "beta_kubernetes_io_arch": "amd64",
                  "beta_kubernetes_io_os": "linux",
                  "cloud_cluster": "cloud-sit-2",
                  "group": "gpu",
                  "instance": "l-172016023015-ops.cloudminds.com",
                  "job": "kubernetes-nodes-kubelet",
                  "kubernetes_io_arch": "amd64",
                  "kubernetes_io_hostname": "l-172016023015-ops.cloudminds.com",
                  "kubernetes_io_os": "linux",
                  "media_location": "138-beijing",
                  "namespace": "crss-plus-v3-138",
                  "nvidia_com_gpu": "true",
                  "omaRocDm": "fit",
                  "persistentvolumeclaim": "stable-crss-mongo",
                  "prometheus": "standard",
                  "run_ue4_new": "sit138",
                  "type": "kubernetes.pvc"
                },
                "annotations": {
                  "description": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-v3-138 设备 stable-crss-mongo 未来24小时满额预警, 可能超出-0.98GB",
                  "key": "nodes.disk.pvc.predict_linear",
                  "summary": "Kubernetes集群 cloud-sit-2 命名空间 crss-plus-v3-138 设备 stable-crss-mongo 未来24小时满额预警",
                  "trigger": "-0.9831370434819533"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:54:47.326015946Z",
                "value": "-9.831370434819533e-01",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 1.736541024,
            "lastEvaluation": "2021-04-21T11:07:47.32618103+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.cloud-dns",
        "file": "/thanos-prometheus/config/rules/middleware/cloud-dns.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "DNS大陆地区域名请求延时",
            "query": "histogram_quantile(0.99, sum by(le) (rate(coredns_proxy_request_duration_seconds_bucket{job=\"cloud-coredns\",to!~\"127.*\"}[2m]))) > 30",
            "duration": 60,
            "labels": {
              "alertname": "DNS大陆地区域名请求延时",
              "type": "middleware.cloud-dns"
            },
            "annotations": {
              "description": "Cloud DNS大陆地区域名解析服务延迟告警",
              "key": "middleware.cloud-dns.china",
              "summary": "Cloud DNS大陆地区请求延时告警, 当前值{{ $value }}s",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.067517291,
            "lastEvaluation": "2021-04-21T11:07:48.607046726+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DNS平均域名请求延时",
            "query": "histogram_quantile(0.99, sum by(le) (rate(coredns_forward_request_duration_seconds_bucket{job=\"cloud-coredns\"}[2m]))) > 30",
            "duration": 60,
            "labels": {
              "alertname": "DNS平均域名请求延时",
              "type": "middleware.cloud-dns"
            },
            "annotations": {
              "description": "Cloud DNS域名解析服务延迟告警",
              "key": "middleware.cloud-dns.google",
              "summary": "Cloud DNS地区请求延时告警, 当前值{{ $value }}s",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.171872471,
            "lastEvaluation": "2021-04-21T11:07:48.435169866+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DNS海外地区域名请求延时",
            "query": "histogram_quantile(0.99, sum by(le) (rate(coredns_forward_request_duration_seconds_bucket{job=\"cloud-coredns\",to=~\"8.8.*\"}[2m]))) > 30",
            "duration": 60,
            "labels": {
              "alertname": "DNS海外地区域名请求延时",
              "type": "middleware.cloud-dns"
            },
            "annotations": {
              "description": "Cloud DNS海外域名解析服务延迟告警",
              "key": "middleware.cloud-dns.google.warning",
              "summary": "Cloud DNS海外地区请求延时告警, 当前值{{ $value }}s",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.043809647,
            "lastEvaluation": "2021-04-21T11:07:48.734930839+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "DNS达闼域名请求延时",
            "query": "histogram_quantile(0.99, sum by(le) (rate(coredns_forward_request_duration_seconds_bucket{job=\"cloud-coredns\",to!~\"127.*|8.8.*\"}[2m]))) > 30",
            "duration": 60,
            "labels": {
              "alertname": "DNS达闼域名请求延时",
              "type": "middleware.cloud-dns"
            },
            "annotations": {
              "description": "Cloud DNS达闼VBN域名解析服务延迟告警",
              "key": "middleware.cloud-dns.vbn",
              "summary": "Cloud DNS达闼VBN地区请求延时告警, 当前值{{ $value }}s",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.06035784,
            "lastEvaluation": "2021-04-21T11:07:48.674566786+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.cloud-logs",
        "file": "/thanos-prometheus/config/rules/middleware/cloud-logs.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "Cloud-Prod-1集群flume消费端Source_Received_Count",
            "query": "abs(delta(FLUME_SOURCE_EventReceivedCount{cloud_cluster=\"cloud-prod-1\"}[1h])) == 0",
            "duration": 300,
            "labels": {
              "alertname": "Cloud-Prod-1集群flume消费端Source_Received_Count",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 1小时内连续为0 {{ $value }}",
              "key": "middleware.cloud-logs.flume_srouce_received.prod-1",
              "summary": "集群 {{ $labels.cloud_cluster }} Flume客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 事件接收异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003379849,
            "lastEvaluation": "2021-04-21T11:07:42.598017652+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Cloud-Prod-3集群Flume消费端Source Received Count",
            "query": "abs(delta(FLUME_SOURCE_EventReceivedCount{cloud_cluster=\"cloud-prod-3\",name!~\"source_from_kafka|source_from_smartvoice\"}[1h])) == 0",
            "duration": 300,
            "labels": {
              "alertname": "Cloud-Prod-3集群Flume消费端Source Received Count",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 1小时内连续为0 {{ $value }}",
              "key": "middleware.cloud-logs.flume_srouce_received",
              "summary": "集群 {{ $labels.cloud_cluster }} Flume客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 事件接收异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005314585,
            "lastEvaluation": "2021-04-21T11:07:42.592699988+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Cloud-Prod-4集群Flume消费端Source Received Count",
            "query": "abs(delta(FLUME_SOURCE_EventReceivedCount{cloud_cluster=\"cloud-prod-4\",name!~\"source_from_kafka|source_from_smartvoice |source_from_smartvoice-asrctrl\"}[1h])) == 0",
            "duration": 300,
            "labels": {
              "alertname": "Cloud-Prod-4集群Flume消费端Source Received Count",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 1小时内连续为0 {{ $value }}",
              "key": "middleware.cloud-logs.flume_srouce_received.prod-4",
              "summary": "集群 {{ $labels.cloud_cluster }} Flume客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 事件接收异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.095980321,
            "lastEvaluation": "2021-04-21T11:07:42.043752+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Fluentd客户端容器状态",
            "query": "kube_pod_container_status_running{container=\"log-agent\",namespace=\"cloud-logs\"} == 0",
            "duration": 60,
            "labels": {
              "alertname": "Fluentd客户端容器状态",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "日志客户端 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}} 状态{{ $value }}异常，预期状态1",
              "key": " middleware.cloud-logs.agent_status",
              "summary": "日志客户端{{ $labels.cloud_cluster }} 命名空间 {{ $labels.namespace }} 容器 {{ $labels.pod}}状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.014476204,
            "lastEvaluation": "2021-04-21T11:07:41.528329494+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Fluentd客户端日志缓冲空间",
            "query": "sum by(cloud_cluster, kubernetes_pod_name, type) (fluentd_output_status_queue_byte_size) / 1024 / 1024 / 1024 > 1 and on() hour() > 0 < 15 or on() hour() > 23",
            "duration": 300,
            "labels": {
              "alertname": "Fluentd客户端日志缓冲空间",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 出现缓冲堆积 {{ $value | printf \"%.2f\" }} GB",
              "key": "middleware.cloud-logs.fluentd_queue_size",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 缓冲堆积",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.170603643,
            "lastEvaluation": "2021-04-21T11:07:41.873144639+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Fluentd客户端日志输出错误",
            "query": "sum by(cloud_cluster, kubernetes_pod_name, plugin_id) (rate(fluentd_output_status_num_errors[1m])) > 5 and on() hour() > 0 < 15",
            "duration": 300,
            "labels": {
              "alertname": "Fluentd客户端日志输出错误",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 出口 {{ $labels.plugin_id }} 发生错误 {{ $value }} 次",
              "key": "middleware.cloud-logs.fluentd_output_error",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 出口 {{ $labels.plugin_id }} 发生错误",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.330326931,
            "lastEvaluation": "2021-04-21T11:07:41.542809348+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Fluentd客户端日志错误重试",
            "query": "sum by(cloud_cluster, kubernetes_pod_name, type) (fluentd_output_status_retry_wait) > 500 and on() hour() > 0 < 15 or on() hour() > 23",
            "duration": 300,
            "labels": {
              "alertname": "Fluentd客户端日志错误重试",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 重试 {{ $value }} 次",
              "key": "middleware.cloud-logs.fluentd_output_retry",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 大量重试",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.224564569,
            "lastEvaluation": "2021-04-21T11:07:42.368129073+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "Flume消费端Channel Size",
            "query": "FLUME_CHANNEL_ChannelSize > 80 and on() hour() > 0 < 15 or on() hour() > 23",
            "duration": 900,
            "labels": {
              "alertname": "Flume消费端Channel Size",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} Size过大，当前 {{ $value }}%",
              "key": "middleware.cloud-logs.flume_channel_size",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} Size过大",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "Flume消费端Channel Size",
                  "app": "cloud-log-flume",
                  "app_image_version": "v0.5",
                  "app_instance": "stable",
                  "app_kubernetes_io_name": "cloud-logs",
                  "cloud_cluster": "cloud-sit-1",
                  "host": "localhost:41414",
                  "instance": "10.156.143.94:9360",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "cloud-logs",
                  "kubernetes_pod_name": "stable-cloud-log-flume-854fcb64f4-dxhgw",
                  "log_collect": "true",
                  "name": "source_from_harix_channel",
                  "pod_template_hash": "854fcb64f4",
                  "prometheus": "middleware",
                  "type": "middleware.cloud-logs"
                },
                "annotations": {
                  "description": "生产环境集群 cloud-sit-1 日志采集客户端 stable-cloud-log-flume-854fcb64f4-dxhgw 类型 CHANNEL 名称 source_from_harix_channel Size过大，当前 135%",
                  "key": "middleware.cloud-logs.flume_channel_size",
                  "summary": "生产环境集群 cloud-sit-1 日志采集客户端 stable-cloud-log-flume-854fcb64f4-dxhgw 类型 CHANNEL 名称 source_from_harix_channel Size过大",
                  "trigger": "135"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:07:41.528077126Z",
                "value": "1.35e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "Flume消费端Channel Size",
                  "app": "cloud-log-flume",
                  "app_image_version": "v0.5",
                  "app_instance": "stable",
                  "app_kubernetes_io_name": "cloud-logs",
                  "cloud_cluster": "cloud-prod-3",
                  "host": "localhost:41414",
                  "instance": "10.244.11.108:9360",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "cloud-logs",
                  "kubernetes_pod_name": "stable-cloud-log-flume-7b4bf76644-br5bf",
                  "log_collect": "true",
                  "name": "source_from_harix_channel",
                  "pod_template_hash": "7b4bf76644",
                  "prometheus": "middleware",
                  "type": "middleware.cloud-logs"
                },
                "annotations": {
                  "description": "生产环境集群 cloud-prod-3 日志采集客户端 stable-cloud-log-flume-7b4bf76644-br5bf 类型 CHANNEL 名称 source_from_harix_channel Size过大，当前 1181%",
                  "key": "middleware.cloud-logs.flume_channel_size",
                  "summary": "生产环境集群 cloud-prod-3 日志采集客户端 stable-cloud-log-flume-7b4bf76644-br5bf 类型 CHANNEL 名称 source_from_harix_channel Size过大",
                  "trigger": "1181"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:07:41.528077126Z",
                "value": "1.181e+03",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.006641837,
            "lastEvaluation": "2021-04-21T11:07:42.361482092+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "Flume消费端Sink DrainSuccess Count",
            "query": "abs(delta(FLUME_SINK_EventDrainSuccessCount[2m])) == 0",
            "duration": 900,
            "labels": {
              "alertname": "Flume消费端Sink DrainSuccess Count",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 2分钟内连续为0 {{ $value }}",
              "key": "middleware.cloud-logs.flume_sink_drain_success",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 事件接收异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "Flume消费端Sink DrainSuccess Count",
                  "app": "cloud-log-flume",
                  "app_image_version": "v0.5",
                  "app_instance": "stable",
                  "app_kubernetes_io_name": "cloud-logs",
                  "cloud_cluster": "cloud-prod-3",
                  "host": "localhost:41414",
                  "instance": "10.244.11.108:9360",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "cloud-logs",
                  "kubernetes_pod_name": "stable-cloud-log-flume-7b4bf76644-br5bf",
                  "log_collect": "true",
                  "name": "source_from_kafka_sink",
                  "pod_template_hash": "7b4bf76644",
                  "prometheus": "middleware",
                  "type": "middleware.cloud-logs"
                },
                "annotations": {
                  "description": "生产环境集群 cloud-prod-3 日志采集客户端 stable-cloud-log-flume-7b4bf76644-br5bf 类型 SINK 名称 source_from_kafka_sink 2分钟内连续为0 0",
                  "key": "middleware.cloud-logs.flume_sink_drain_success",
                  "summary": "生产环境集群 cloud-prod-3 日志采集客户端 stable-cloud-log-flume-7b4bf76644-br5bf 类型 SINK 名称 source_from_kafka_sink 事件接收异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:41.528077126Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "Flume消费端Sink DrainSuccess Count",
                  "app": "cloud-log-flume",
                  "app_image_version": "v0.5",
                  "app_instance": "stable",
                  "app_kubernetes_io_name": "cloud-logs",
                  "cloud_cluster": "cloud-prod-4",
                  "host": "localhost:41414",
                  "instance": "10.58.0.226:9360",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "cloud-logs",
                  "kubernetes_pod_name": "stable-cloud-log-flume-774c778c98-rw5ct",
                  "log_collect": "true",
                  "name": "source_from_kafka_sink",
                  "pod_template_hash": "774c778c98",
                  "prometheus": "middleware",
                  "type": "middleware.cloud-logs"
                },
                "annotations": {
                  "description": "生产环境集群 cloud-prod-4 日志采集客户端 stable-cloud-log-flume-774c778c98-rw5ct 类型 SINK 名称 source_from_kafka_sink 2分钟内连续为0 0",
                  "key": "middleware.cloud-logs.flume_sink_drain_success",
                  "summary": "生产环境集群 cloud-prod-4 日志采集客户端 stable-cloud-log-flume-774c778c98-rw5ct 类型 SINK 名称 source_from_kafka_sink 事件接收异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:41.528077126Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "Flume消费端Sink DrainSuccess Count",
                  "app": "cloud-log-flume",
                  "app_image_version": "v0.5",
                  "app_instance": "stable",
                  "app_kubernetes_io_name": "cloud-logs",
                  "cloud_cluster": "cloud-prod-4",
                  "host": "localhost:41414",
                  "instance": "10.58.0.226:9360",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "cloud-logs",
                  "kubernetes_pod_name": "stable-cloud-log-flume-774c778c98-rw5ct",
                  "log_collect": "true",
                  "name": "source_from_smartvoice-asrctrl_sink",
                  "pod_template_hash": "774c778c98",
                  "prometheus": "middleware",
                  "type": "middleware.cloud-logs"
                },
                "annotations": {
                  "description": "生产环境集群 cloud-prod-4 日志采集客户端 stable-cloud-log-flume-774c778c98-rw5ct 类型 SINK 名称 source_from_smartvoice-asrctrl_sink 2分钟内连续为0 0",
                  "key": "middleware.cloud-logs.flume_sink_drain_success",
                  "summary": "生产环境集群 cloud-prod-4 日志采集客户端 stable-cloud-log-flume-774c778c98-rw5ct 类型 SINK 名称 source_from_smartvoice-asrctrl_sink 事件接收异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T02:18:11.528077126Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.044790337,
            "lastEvaluation": "2021-04-21T11:07:42.601400926+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Flume消费端Source Received Count(测试环境)",
            "query": "abs(delta(FLUME_SOURCE_EventReceivedCount{cloud_cluster=~\"cloud-sit.*\"}[1d])) == 0 and on() hour() > 0 < 15 or on() hour() > 23",
            "duration": 300,
            "labels": {
              "alertname": "Flume消费端Source Received Count(测试环境)",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "测试环境集群 {{ $labels.cloud_cluster }} 日志采集客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 24小时内连续为0 {{ $value }}",
              "key": "middleware.cloud-logs.flume_srouce_received.sit",
              "summary": "生产环境集群 {{ $labels.cloud_cluster }} Flume客户端 {{ $labels.kubernetes_pod_name }} 类型 {{ $labels.type }} 名称 {{ $labels.name }} 事件接收异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.221736269,
            "lastEvaluation": "2021-04-21T11:07:42.139739707+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "日志Kafka集群消息消费延迟",
            "query": "sum by(consumergroup, topic) (kafka_consumergroup_lag{kubernetes_namespace=\"cloud-logs\"}) > 20000",
            "duration": 300,
            "labels": {
              "alertname": "日志Kafka集群消息消费延迟",
              "type": "middleware.cloud-logs"
            },
            "annotations": {
              "description": "日志Kafka集群队列{{ $labels.topic }}消费延迟大于2w条，当前滞后 {{ $value }} 条",
              "key": "middleware.cloud-logs.kafka.lag",
              "summary": "日志Kafka集群队列{{ $labels.topic }}消费延迟大于2w条",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.063766481,
            "lastEvaluation": "2021-04-21T11:07:42.646195519+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.elasticsearch",
        "file": "/thanos-prometheus/config/rules/middleware/elasticsearch.rules",
        "rules": [
          {
            "state": "FIRING",
            "name": "elasticsearch健康检查",
            "query": "elasticsearch_cluster_health_up != 1",
            "duration": 300,
            "labels": {
              "alertname": "elasticsearch健康检查",
              "type": "middleware.elasticsearch"
            },
            "annotations": {
              "description": "elasticsearch {{ $labels.instance }} 状态异常,所在app {{ $labels.app }},所在集群 {{ $labels.cloud_cluster }}",
              "key": "middleware.elasticsearch.health",
              "summary": "elasticsearch {{ $labels.instance }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "elasticsearch健康检查",
                  "app": "smartvoice-elasticsearch-exporter",
                  "cloud_cluster": "cloud-sit-2",
                  "instance": "10.244.13.219:9114",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "smartvoice-cloudpepper-v3-fit",
                  "kubernetes_pod_name": "smartvoice-elasticsearch-exporter-697465cf5c-c9g42",
                  "pod_template_hash": "697465cf5c",
                  "prometheus": "middleware",
                  "type": "middleware.elasticsearch"
                },
                "annotations": {
                  "description": "elasticsearch 10.244.13.219:9114 状态异常,所在app smartvoice-elasticsearch-exporter,所在集群 cloud-sit-2",
                  "key": "middleware.elasticsearch.health",
                  "summary": "elasticsearch 10.244.13.219:9114 状态异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-03-22T08:37:01.679566352Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.010112776,
            "lastEvaluation": "2021-04-21T11:07:31.679893818+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.loadbalance",
        "file": "/thanos-prometheus/config/rules/middleware/loadbalance.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "四层负载均衡器Keepalived进程",
            "query": "keepalived_process_state{job=\"node-exporter\"} < 1",
            "duration": 60,
            "labels": {
              "alertname": "四层负载均衡器Keepalived进程",
              "type": "middleware.loadbalance"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }}主机组{{ $labels.host_group}}Keepalived进程中断,状态{{ $value }},预期0",
              "key": "middleware.loadbalance.process_state",
              "summary": "主机 {{ $labels.instance }}主机组{{ $labels.host_group}}Keepalived进程中断",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.009808613,
            "lastEvaluation": "2021-04-21T11:07:37.396990263+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "四层负载均衡器Virtual IP 状态检查",
            "query": "sum(keepalived_vip_state{vip=\"10.51.1.232\"}) < 0.9 or sum(keepalived_vip_state{vip=\"10.51.1.231\"}) < 0.9 or sum(keepalived_vip_state{host_group=\"cloud-prod-3\",vip=\"10.51.3.231\"}) < 0.9 or sum(keepalived_vip_state{host_group=\"cloud-prod-3\",vip=\"10.51.3.232\"}) < 0.9 or sum(keepalived_vip_state{host_group=\"cloud-sit-2\",vip=\"10.155.254.137\"}) < 0.9",
            "duration": 60,
            "labels": {
              "alertname": "四层负载均衡器Virtual IP 状态检查",
              "type": "middleware.loadbalance"
            },
            "annotations": {
              "description": "负载均衡器VIP {{ $labels.vip }}状态异常,,状态{{ $value }},预期1",
              "key": "middleware.loadbalance.virtual_ip",
              "summary": "负载均衡器VIP {{ $labels.vip }}状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.047630919,
            "lastEvaluation": "2021-04-21T11:07:37.41683457+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "四层负载均衡器端口渲染错误",
            "query": "consul_template_state{host_group=\"load-balance\"} == 0",
            "duration": 0,
            "labels": {
              "alertname": "四层负载均衡器端口渲染错误",
              "type": "middleware.loadbalance"
            },
            "annotations": {
              "description": "负载均衡器 {{ $labels.instance}} 端口渲染错误,状态{{ $value }},预期1",
              "key": "middleware.loadbalance.consul",
              "summary": "负载均衡器 {{ $labels.instance}} 端口渲染错误",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.009159888,
            "lastEvaluation": "2021-04-21T11:07:37.387827035+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "四层负载均衡器语法错误",
            "query": "nginx_configuration_syntax{host_group=\"load-balance\"} == 0",
            "duration": 0,
            "labels": {
              "alertname": "四层负载均衡器语法错误",
              "type": "middleware.loadbalance"
            },
            "annotations": {
              "description": "负载均衡器{{ $labels.instance}}语法错误,,状态{{ $value }},预期1",
              "key": "middleware.loadbalance.syntax",
              "summary": "负载均衡器{{ $labels.instance}}语法错误",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.010029323,
            "lastEvaluation": "2021-04-21T11:07:37.406801942+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.mongodb.rules",
        "file": "/thanos-prometheus/config/rules/middleware/mongodb.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "mongodb1分钟操作",
            "query": "rate(mongodb_mongod_op_counters_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) > 1000",
            "duration": 60,
            "labels": {
              "alertname": "mongodb1分钟操作",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB 1分钟操作过高。集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mongodb.ops",
              "summary": "mongoDB 1分钟操作过高。集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004429047,
            "lastEvaluation": "2021-04-21T11:07:41.48842223+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb1分钟网络流量",
            "query": "rate(mongodb_mongod_network_bytes_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) / 1024 / 1024 > 512",
            "duration": 60,
            "labels": {
              "alertname": "mongodb1分钟网络流量",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB 1分钟网络流量超限。集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}\n",
              "key": "middleware.mongodb.net",
              "summary": "mongoDB 1分钟网络流量超限。集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.009119837,
            "lastEvaluation": "2021-04-21T11:07:41.543423551+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb全局锁",
            "query": "mongodb_mongod_global_lock_ratio{cloud_cluster=~\"cloud-prod-.*\"} != 0 or mongodb_mongod_global_lock_current_queue{cloud_cluster=~\"cloud-prod-.*\"} != 0 or mongodb_mongod_global_lock_ratio{cloud_cluster=~\"cloud-prod-.*\"} != 0",
            "duration": 10,
            "labels": {
              "alertname": "mongodb全局锁",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB出现全局锁定，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mongodb.glock",
              "summary": "mongoDB出现全局锁定，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.00706372,
            "lastEvaluation": "2021-04-21T11:07:41.495837034+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb内存使用率",
            "query": "mongodb_mongod_wiredtiger_cache_bytes{type=\"total\"} / on(kubernetes_pod_name, app, cloud_cluster, component, instance) mongodb_mongod_wiredtiger_cache_max_bytes * 100 > 80",
            "duration": 60,
            "labels": {
              "alertname": "mongodb内存使用率",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB内存使用率偏高，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前百分比{{$value}}",
              "key": "middleware.mongodb.buffer",
              "summary": "mongoDB内存使用率偏高，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.017778155,
            "lastEvaluation": "2021-04-21T11:07:41.52564182+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb可用事务ticket",
            "query": "mongodb_mongod_wiredtiger_concurrent_transactions_available_tickets{cloud_cluster=~\"cloud-prod-.*\"} < 10",
            "duration": 60,
            "labels": {
              "alertname": "mongodb可用事务ticket",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB可用ticket过少，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值{{$value}}",
              "key": "middleware.mongodb.ticket",
              "summary": "mongoDB可用ticket过少，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.02326951,
            "lastEvaluation": "2021-04-21T11:07:41.397737886+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb可用连接",
            "query": "mongodb_mongod_connections{cloud_cluster=~\"cloud-prod-.*\",state=\"available\"} < 100",
            "duration": 60,
            "labels": {
              "alertname": "mongodb可用连接",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB可用连接过低，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mongodb.conns",
              "summary": "mongoDB可用连接过低，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.036646646,
            "lastEvaluation": "2021-04-21T11:07:41.421011949+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb实例存活状态",
            "query": "mongodb_up != 1",
            "duration": 1,
            "labels": {
              "alertname": "mongodb实例存活状态",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB实例异常终止，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mongodb.up",
              "summary": "mongoDB实例异常终止，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.030751014,
            "lastEvaluation": "2021-04-21T11:07:41.457665422+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb数据库文件过大",
            "query": "(mongodb_mongod_db_data_size_bytes{cloud_cluster=~\"cloud-prod-.*\"} + mongodb_mongod_db_index_size_bytes{cloud_cluster=~\"cloud-prod-.*\"}) / 1024 / 1024 / 1024 > 60",
            "duration": 10,
            "labels": {
              "alertname": "mongodb数据库文件过大",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB数据库过大，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，db name{{$labels.db}}，当前值 {{ $value }}",
              "key": "middleware.mongodb.dbsize",
              "summary": "mongoDB数据库过大，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.022735566,
            "lastEvaluation": "2021-04-21T11:07:41.502904054+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mongodb短时间连接超限",
            "query": "rate(mongodb_mongod_connections_metrics_created_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) > 1000",
            "duration": 60,
            "labels": {
              "alertname": "mongodb短时间连接超限",
              "type": "middleware.mongodb"
            },
            "annotations": {
              "description": "mongoDB 1分钟内连接次数超过1000，请关注短链接。\n集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mongodb.conn",
              "summary": "mongoDB 1分钟内连接次数超过1000，请关注短链接。\n集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.002980333,
            "lastEvaluation": "2021-04-21T11:07:41.492853442+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.mysql",
        "file": "/thanos-prometheus/config/rules/middleware/mysql.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "msql-slaveSql",
            "query": "mysql_slave_status_slave_sql_running{cloud_cluster=~\"cloud-prod.*\"} != 1",
            "duration": 30,
            "labels": {
              "alertname": "msql-slaveSql",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL 主从复制sql 线程失败，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.slavesql",
              "summary": "MYSQL 主从复制失败,集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003736442,
            "lastEvaluation": "2021-04-21T11:07:36.732414708+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql 连接数存在跌零风险",
            "query": "(mysql_info_schema_processes_by_user{cloud_cluster=~\"cloud-prod.*\"} offset 1m - mysql_info_schema_processes_by_user{cloud_cluster=~\"cloud-prod.*\"}) / mysql_info_schema_processes_by_user{cloud_cluster=~\"cloud-prod.*\"} offset 1m * 100 > 90",
            "duration": 0,
            "labels": {
              "alertname": "mysql 连接数存在跌零风险",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL连接数较1分钟前有较大变动，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，1分钟连接数差值 {{ $value }} %",
              "key": "middleware.mysql.connection",
              "summary": "MYSQL连接数较1分钟前有较大变动，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.01514016,
            "lastEvaluation": "2021-04-21T11:07:36.713141138+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-TableDefaultCache",
            "query": "mysql_global_status_open_table_definitions{cloud_cluster=~\"cloud-prod.*\"} > mysql_global_variables_table_definition_cache{cloud_cluster=~\"cloud-prod.*\"}",
            "duration": 0,
            "labels": {
              "alertname": "mysql-TableDefaultCache",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL table_definition_cache 过小，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.definecache",
              "summary": "MYSQL table_definition_cache 过小，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006026665,
            "lastEvaluation": "2021-04-21T11:07:36.699699375+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-binlog状态",
            "query": "mysql_global_variables_log_bin{cloud_cluster=~\"cloud-prod.*\"} != 1",
            "duration": 0,
            "labels": {
              "alertname": "mysql-binlog状态",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL binlog 未开启，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.binlog",
              "summary": "MYSQL binlog 未开启，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003762882,
            "lastEvaluation": "2021-04-21T11:07:36.695933207+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-readbuffer 过大",
            "query": "mysql_global_variables_read_buffer_size{cloud_cluster=~\"cloud-prod.*\"} > mysql_global_variables_slave_max_allowed_packet{cloud_cluster=~\"cloud-prod.*\"}",
            "duration": 60,
            "labels": {
              "alertname": "mysql-readbuffer 过大",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例read buffer 过大，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.readbuffer",
              "summary": "MYSQL实例read buffer 过大，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007408541,
            "lastEvaluation": "2021-04-21T11:07:36.705729348+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-sortbuffer错误",
            "query": "mysql_global_variables_innodb_sort_buffer_size{cloud_cluster=~\"cloud-prod.*\"} < 256 * 1024 or mysql_global_variables_read_buffer_size{cloud_cluster=~\"cloud-prod.*\"} > 4 * 1024 * 1024",
            "duration": 60,
            "labels": {
              "alertname": "mysql-sortbuffer错误",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例sort buffer 配置错误，过大或过小，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.sortbuffer",
              "summary": "MYSQL实例sort buffer 配置错误，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007172822,
            "lastEvaluation": "2021-04-21T11:07:36.688756939+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-主从",
            "query": "mysql_slave_status_slave_io_running != 1",
            "duration": 30,
            "labels": {
              "alertname": "mysql-主从",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL主从同步失败，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.replication",
              "summary": "MYSQL主从同步失败，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003838781,
            "lastEvaluation": "2021-04-21T11:07:36.756650743+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-主从延迟",
            "query": "rate(mysql_slave_status_seconds_behind_master{cloud_cluster=~\"cloud-prod.*\"}[1m]) > 30",
            "duration": 30,
            "labels": {
              "alertname": "mysql-主从延迟",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL主从同步延迟超过30s，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.slavedelay",
              "summary": "MYSQL主从同步延迟，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004207219,
            "lastEvaluation": "2021-04-21T11:07:36.752440647+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-打开文件数",
            "query": "mysql_global_status_innodb_num_open_files{cloud_cluster=~\"cloud-prod.*\"} > (mysql_global_variables_open_files_limit{cloud_cluster=~\"cloud-prod.*\"}) * 0.75",
            "duration": 30,
            "labels": {
              "alertname": "mysql-打开文件数",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL 实例打开文件数过多，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.openfiles",
              "summary": "MYSQL 实例打开文件数过多，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007037743,
            "lastEvaluation": "2021-04-21T11:07:36.745400015+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-探活",
            "query": "mysql_up{cloud_cluster!=\"cloud-sit-1\"} == 0",
            "duration": 30,
            "labels": {
              "alertname": "mysql-探活",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL 实例 is down，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.instance",
              "summary": "MYSQL 实例 is down，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.015482172,
            "lastEvaluation": "2021-04-21T11:07:36.760493028+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql-连接数过高",
            "query": "mysql_global_status_max_used_connections{cloud_cluster=~\"cloud-prod.*\"} > mysql_global_variables_max_connections{cloud_cluster=~\"cloud-prod.*\"} * 0.8",
            "duration": 60,
            "labels": {
              "alertname": "mysql-连接数过高",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL 实例连接数超过80%，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.connections",
              "summary": "MYSQL实例连接数超过80%，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007204185,
            "lastEvaluation": "2021-04-21T11:07:36.68154962+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql写入流量",
            "query": "rate(mysql_global_status_bytes_received{cloud_cluster=~\"cloud-prod.*\"}[1m]) / 1024 / 1024 > 10",
            "duration": 300,
            "labels": {
              "alertname": "mysql写入流量",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例写入流量异常,集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前{{ $value | printf \"%.2f\" }}MB/s",
              "key": "middleware.mysql.received_traffic",
              "summary": "MYSQL实例写入流量异常,集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004126957,
            "lastEvaluation": "2021-04-21T11:07:36.728284454+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql发送流量",
            "query": "rate(mysql_global_status_bytes_sent{cloud_cluster=~\"cloud-prod.*\"}[1m]) / 1024 / 1024 > 20",
            "duration": 300,
            "labels": {
              "alertname": "mysql发送流量",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例发送流量异常, 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前{{ $value | printf \"%.2f\" }}MB/s",
              "key": "middleware.mysql.send_traffic",
              "summary": "MYSQL实例发送流量异常，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005771426,
            "lastEvaluation": "2021-04-21T11:07:36.775979044+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql实时qps",
            "query": "irate(mysql_global_status_questions[1m]) > 6000",
            "duration": 0,
            "labels": {
              "alertname": "mysql实时qps",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例QPS峰值预警，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\" }}",
              "key": "middleware.mysql.qps",
              "summary": "MYSQL实例QPS峰值预警，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.014097165,
            "lastEvaluation": "2021-04-21T11:07:36.66036495+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql慢查询",
            "query": "mysql_global_status_slow_queries{cloud_cluster=~\"cloud-prod.*\"} - mysql_global_status_slow_queries{cloud_cluster=~\"cloud-prod.*\"} offset 1m > 3",
            "duration": 0,
            "labels": {
              "alertname": "mysql慢查询",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例 出现慢查询, 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.slow_queries",
              "summary": "MYSQL实例出现慢查询，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007079698,
            "lastEvaluation": "2021-04-21T11:07:36.674466499+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql锁表等待",
            "query": "mysql_global_status_table_locks_waited{cloud_cluster=~\"cloud-prod.*\"} - mysql_global_status_table_locks_waited{cloud_cluster=~\"cloud-prod.*\"} offset 1m > 1",
            "duration": 0,
            "labels": {
              "alertname": "mysql锁表等待",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例锁表，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.table_lock_wait",
              "summary": "MYSQL实例锁表，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005514996,
            "lastEvaluation": "2021-04-21T11:07:36.739881461+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "mysql阻塞连接",
            "query": "mysql_global_status_locked_connects{cloud_cluster=~\"cloud-prod.*\"} > 0",
            "duration": 0,
            "labels": {
              "alertname": "mysql阻塞连接",
              "type": "middleware.mysql"
            },
            "annotations": {
              "description": "MYSQL实例连接连接阻塞,  集群名称 {{ $labels.cloud_cluster }} ，命名空间 {{ $labels.kubernetes_namespace }} ，pod名称 {{ $labels.kubernetes_pod_name}}，当前{{ $value }}",
              "key": "middleware.mysql.connect_lock",
              "summary": "MYSQL实例连接连接阻塞,  集群名称 {{ $labels.cloud_cluster }} ，命名空间 {{ $labels.kubernetes_namespace }} ，pod名称 {{ $labels.kubernetes_pod_name}}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003724329,
            "lastEvaluation": "2021-04-21T11:07:36.736154099+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "middleware.redis",
        "file": "/thanos-prometheus/config/rules/middleware/redis.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "Redis CPU使用率",
            "query": "rate(redis_cpu_user_seconds_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) + rate(redis_cpu_sys_seconds_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) > 60",
            "duration": 60,
            "labels": {
              "alertname": "Redis CPU使用率",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids生产环境CPU过高 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\"  }}",
              "key": "redis.cpu.usage",
              "summary": "Reids生产环境 集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} 的CPU过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007253069,
            "lastEvaluation": "2021-04-21T11:07:36.960166695+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis 主从同步延迟",
            "query": "redis_master_last_io_seconds{cloud_cluster=~\"cloud-prod-.*\"} > 10",
            "duration": 30,
            "labels": {
              "alertname": "Redis 主从同步延迟",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 主从同步延迟告警，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.redis_master_last_io",
              "summary": "redis 主从同步延迟告警，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004038873,
            "lastEvaluation": "2021-04-21T11:07:36.978653841+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis 执行rdb时间过长",
            "query": "redis_rdb_bgsave_in_progress{cloud_cluster=~\"cloud-prod-.*\"} == 0 and redis_rdb_current_bgsave_duration_sec{cloud_cluster=~\"cloud-prod-.*\"} > 2",
            "duration": 1,
            "labels": {
              "alertname": "Redis 执行rdb时间过长",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 执行rdb 时间过长，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.rdblong",
              "summary": "redis {{ $labels.instance }} 执行rdb时间过长",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.008268014,
            "lastEvaluation": "2021-04-21T11:07:36.951895228+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "Redis健康检查",
            "query": "redis_up != 1",
            "duration": 300,
            "labels": {
              "alertname": "Redis健康检查",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 未启动或已宕机，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.mysql.health",
              "summary": "redis {{ $labels.instance }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "Redis健康检查",
                  "app": "redis-exporter-test",
                  "cloud_cluster": "cloud-sit-1",
                  "instance": "10.156.62.63:9121",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "big-data-134",
                  "kubernetes_pod_name": "redis-exporter-test-fcf4c4d8f-z5xvz",
                  "pod_template_hash": "fcf4c4d8f",
                  "prometheus": "middleware",
                  "type": "middleware.redis"
                },
                "annotations": {
                  "description": "redis 未启动或已宕机，集群名称 cloud-sit-1 ，app名称 redis-exporter-test-fcf4c4d8f-z5xvz，命名空间 big-data-134，当前值 0",
                  "key": "middleware.mysql.health",
                  "summary": "redis 10.156.62.63:9121 状态异常",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T10:02:06.91527966Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.01079111,
            "lastEvaluation": "2021-04-21T11:07:36.93056709+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis内存使用超限",
            "query": "redis_memory_used_bytes{cloud_cluster=~\"cloud-prod-.*\"} / redis_total_system_memory_bytes{cloud_cluster=~\"cloud-prod-.*\"} * 100 > 90",
            "duration": 10,
            "labels": {
              "alertname": "Redis内存使用超限",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 内存使用率过高，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.health",
              "summary": "redis {{ $labels.instance }} 内存使用状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.010727912,
            "lastEvaluation": "2021-04-21T11:07:37.264703024+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis内存碎片率过高",
            "query": "redis_mem_fragmentation_ratio{cloud_cluster=~\"cloud-prod-.*\"} > 10",
            "duration": 0,
            "labels": {
              "alertname": "Redis内存碎片率过高",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 内存碎片过高，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.frag",
              "summary": "redis 内存碎片过高，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006056038,
            "lastEvaluation": "2021-04-21T11:07:36.924507845+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis命中率过低",
            "query": "redis_keyspace_hits_total{cloud_cluster=~\"cloud-prod-.*\"} / (redis_keyspace_hits_total{cloud_cluster=~\"cloud-prod-.*\"} + redis_keyspace_misses_total{cloud_cluster=~\"cloud-prod-.*\"}) < 0",
            "duration": 0,
            "labels": {
              "alertname": "Redis命中率过低",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 命中率过低，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.hit",
              "summary": "redis 命中率过低，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.220088209,
            "lastEvaluation": "2021-04-21T11:07:37.03430846+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis慢查询",
            "query": "redis_last_slow_execution_duration_seconds{cloud_cluster=~\"cloud-prod-.*\"} > 1",
            "duration": 60,
            "labels": {
              "alertname": "Redis慢查询",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids生产环境出现慢查询, 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "redis.slowquery",
              "summary": "Reids生产环境 集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} 出现慢查询",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005272916,
            "lastEvaluation": "2021-04-21T11:07:36.9466192+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis执行时间陡增",
            "query": "rate(redis_commands_duration_seconds_total{cloud_cluster=~\"cloud-prod-.*\"}[10s]) > 0.2",
            "duration": 10,
            "labels": {
              "alertname": "Redis执行时间陡增",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "10s内命令的执行时间陡增，集群名称 {{ $labels.cloud_cluster }} ，pod名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.commtime",
              "summary": "10s内命令的执行时间陡增,集群名称 {{ $labels.cloud_cluster }} ，pod名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.051608162,
            "lastEvaluation": "2021-04-21T11:07:36.982696074+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis短时新增过多",
            "query": "rate(redis_connected_clients{cloud_cluster=~\"cloud-prod-.*\"}[1m]) > 20",
            "duration": 0,
            "labels": {
              "alertname": "Redis短时新增过多",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 短时连接过多，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.connects",
              "summary": "redis 短时连接过多，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005253882,
            "lastEvaluation": "2021-04-21T11:07:36.94136244+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Redis连接拒绝",
            "query": "increase(redis_rejected_connections_total{cloud_cluster=~\"cloud-prod-.*\"}[1m]) > 0",
            "duration": 10,
            "labels": {
              "alertname": "Redis连接拒绝",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 出现连接拒绝，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.reject",
              "summary": "redis {{ $labels.instance }}发生连接拒绝",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006412135,
            "lastEvaluation": "2021-04-21T11:07:37.254402438+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "Redis连接数异常",
            "query": "redis_connected_clients{cloud_cluster=~\"cloud-prod-.*\"} > 1000",
            "duration": 60,
            "labels": {
              "alertname": "Redis连接数异常",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "redis 连接数异常，集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value }}",
              "key": "middleware.redis.connections",
              "summary": "redis {{ $labels.instance }} 连接数过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "Redis连接数异常",
                  "app": "smartvoice-redis-exporter",
                  "cloud_cluster": "cloud-prod-1",
                  "instance": "10.152.26.10:9121",
                  "job": "kubernetes-pods",
                  "kubernetes_namespace": "smartvoice-iv-v2",
                  "kubernetes_pod_name": "smartvoice-redis-exporter-6b98c5d8d6-9hstg",
                  "pod_template_hash": "2654718482",
                  "prometheus": "middleware",
                  "type": "middleware.redis"
                },
                "annotations": {
                  "description": "redis 连接数异常，集群名称 cloud-prod-1 ，app名称 smartvoice-redis-exporter-6b98c5d8d6-9hstg，命名空间 smartvoice-iv-v2，当前值 9963",
                  "key": "middleware.redis.connections",
                  "summary": "redis 10.152.26.10:9121 连接数过高",
                  "trigger": "9963"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:41:36.91527966Z",
                "value": "9.963e+03",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.072506703,
            "lastEvaluation": "2021-04-21T11:07:37.275434095+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "redis aof 刷盘延迟",
            "query": "redis_aof_delayed_fsync{cloud_cluster=~\"cloud-prod-.*\"} - redis_aof_delayed_fsync{cloud_cluster=~\"cloud-prod-.*\"} offset 1s > 0",
            "duration": 5,
            "labels": {
              "alertname": "redis aof 刷盘延迟",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids aof 写盘出现延迟，可能造成redi实例阻塞。 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\"  }}",
              "key": "redis.aof.delay",
              "summary": "Reids aof 写盘延迟。集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} ",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005407822,
            "lastEvaluation": "2021-04-21T11:07:36.967422589+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "redis rdb写盘失败",
            "query": "redis_rdb_last_bgsave_status{cloud_cluster=~\"cloud-prod-.*\"} == 0",
            "duration": 5,
            "labels": {
              "alertname": "redis rdb写盘失败",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids rdb写盘失败， 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\"  }}\n",
              "key": "redis.rdb.error",
              "summary": "Reids生产环境 集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} rdb写盘失败",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.008978199,
            "lastEvaluation": "2021-04-21T11:07:36.915527271+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "redis 主从同步失败",
            "query": "redis_master_link_up{cloud_cluster=~\"cloud-prod-.*\"} != 1",
            "duration": 1,
            "labels": {
              "alertname": "redis 主从同步失败",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids 主从同步失败， 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\"  }}\n",
              "key": "redis.replicat.error",
              "summary": "Reids生产环境 集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} 主从同步失败",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.00388223,
            "lastEvaluation": "2021-04-21T11:07:37.260817867+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "redis 写 aof 失败",
            "query": "redis_aof_last_write_status{cloud_cluster=~\"cloud-prod-.*\"} == 0",
            "duration": 5,
            "labels": {
              "alertname": "redis 写 aof 失败",
              "type": "middleware.redis"
            },
            "annotations": {
              "description": "Reids 写aof 失败。 集群名称 {{ $labels.cloud_cluster }} ，app名称 {{ $labels.kubernetes_pod_name }}，命名空间 {{ $labels.kubernetes_namespace }}，当前值 {{ $value | printf \"%.2f\"  }}\n",
              "key": "redis.aof.writerror",
              "summary": "Reids生产环境 集群 {{ $labels.cloud_cluster }} 命名空间 {{ $labels.kubernetes_namespace }} 容器 {{ $labels.kubernetes_pod_name }} 写aof失败，检查redis主线程阻塞。",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005817141,
            "lastEvaluation": "2021-04-21T11:07:36.972833466+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.base",
        "file": "/thanos-prometheus/config/rules/nodes/base.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "CPU_IOWait使用率",
            "query": "avg by(instance, host_group) (rate(node_cpu_seconds_total{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",mode=\"iowait\"}[2m])) * 100 > 40",
            "duration": 60,
            "labels": {
              "alertname": "CPU_IOWait使用率",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} CPU_ioWait预警,当前{{ $value | printf \"%.2f\" }}",
              "key": "nodes.base.cpu_rate.iowait",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} CPU_ioWait预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.238491537,
            "lastEvaluation": "2021-04-21T11:07:35.368896418+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "CPU使用率",
            "query": "avg by(instance, host_group) (rate(node_cpu_seconds_total{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",mode=\"idle\"}[5m])) * 100 < 20",
            "duration": 300,
            "labels": {
              "alertname": "CPU使用率",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} CPU_idle预警,当前{{ $value | printf \"%.2f\" }}",
              "key": "nodes.base.cpu_rate",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} CPU_idle预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.221574908,
            "lastEvaluation": "2021-04-21T11:07:35.607394517+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "CPU温度",
            "query": "avg(node_hwmon_temp_celsius{host_group!~\"|develop.*|unknown.*|Training.*\",job=~\"node-exporter\"}) > 60",
            "duration": 900,
            "labels": {
              "alertname": "CPU温度",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 硬件温度过高.当前温度{{ $value | printf \"%.2f\" }}度",
              "key": "nodes.base.cpu_temp",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 硬件温度过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.109556554,
            "lastEvaluation": "2021-04-21T11:07:35.828974621+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "CPU负载",
            "query": "node_load1{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"} > 50",
            "duration": 300,
            "labels": {
              "alertname": "CPU负载",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 负载预警,当前{{ $value | printf \"%.2f\" }}",
              "key": "nodes.base.node_load_lower",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 负载预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "CPU负载",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "cloud-prod-4",
                  "instance": "172.16.31.28",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.base"
                },
                "annotations": {
                  "description": "主机 172.16.31.28 主机组 cloud-prod-4 负载预警,当前60.26",
                  "key": "nodes.base.node_load_lower",
                  "summary": "主机 172.16.31.28 主机组 cloud-prod-4 负载预警",
                  "trigger": "60.26"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T02:33:35.297846533Z",
                "value": "6.026e+01",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.012907394,
            "lastEvaluation": "2021-04-21T11:07:35.298116042+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "主机存活",
            "query": "up{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"} == 0",
            "duration": 60,
            "labels": {
              "alertname": "主机存活",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 失联或者node—exporter故障,状态{{ $value }}",
              "key": "nodes.base.health",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 失联或者node_exporter故障",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "主机存活",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "bigdata",
                  "instance": "172.16.23.141",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.base"
                },
                "annotations": {
                  "description": "主机 172.16.23.141 主机组 bigdata 失联或者node—exporter故障,状态0",
                  "key": "nodes.base.health",
                  "summary": "主机 172.16.23.141 主机组 bigdata 失联或者node_exporter故障",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2020-08-19T10:39:35.297846533Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机存活",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "bigdata",
                  "instance": "172.16.23.134",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.base"
                },
                "annotations": {
                  "description": "主机 172.16.23.134 主机组 bigdata 失联或者node—exporter故障,状态0",
                  "key": "nodes.base.health",
                  "summary": "主机 172.16.23.134 主机组 bigdata 失联或者node_exporter故障",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2020-09-01T02:33:35.297846533Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机存活",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "bigdata",
                  "instance": "172.16.23.144",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.base"
                },
                "annotations": {
                  "description": "主机 172.16.23.144 主机组 bigdata 失联或者node—exporter故障,状态0",
                  "key": "nodes.base.health",
                  "summary": "主机 172.16.23.144 主机组 bigdata 失联或者node_exporter故障",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2020-10-28T09:34:35.297846533Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机存活",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "bigdata",
                  "instance": "172.16.23.140",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.base"
                },
                "annotations": {
                  "description": "主机 172.16.23.140 主机组 bigdata 失联或者node—exporter故障,状态0",
                  "key": "nodes.base.health",
                  "summary": "主机 172.16.23.140 主机组 bigdata 失联或者node_exporter故障",
                  "trigger": "0"
                },
                "state": "FIRING",
                "activeAt": "2020-09-18T10:04:05.297846533Z",
                "value": "0e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.057858487,
            "lastEvaluation": "2021-04-21T11:07:35.311030676+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "内存使用率",
            "query": "(node_memory_MemAvailable_bytes{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"} / node_memory_MemTotal_bytes{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}) * 100 < 10",
            "duration": 600,
            "labels": {
              "alertname": "内存使用率",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 内存空闲率预警,当前{{ $value | printf \"%.2f\" }}%",
              "key": "nodes.base.memory_rate",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 内存空闲率预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.010335388,
            "lastEvaluation": "2021-04-21T11:07:35.950841431+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "内存分配系统空间",
            "query": "sum by(cloud_cluster, instance) (container_memory_rss{cloud_cluster=~\"cloud.*\",host_group!~\"|develop.*|unknown.*|Training.*\",id=\"/system.slice\",pod_name=\"\"}) / 1024 / 1024 / 1024 > 60 or sum by(cloud_cluster, instance) (container_memory_rss{cloud_cluster=~\"cloud.*\",host_group!~\"|develop.*|unknown.*|Training.*\",id=~\"/system.slice/.*.service\"}) / 1024 / 1024 / 1024 > 60",
            "duration": 3600,
            "labels": {
              "alertname": "内存分配系统空间",
              "type": "nodes.base"
            },
            "annotations": {
              "description": "集群 {{ $labels.cloud_cluster }} 主机 {{ $labels.instance}} CGroup系统空间异常,当前{{ $value | printf \"%.2f\" }}GB",
              "key": "nodes.base.memory_system_slice",
              "summary": "集群 {{ $labels.cloud_cluster }} 主机 {{ $labels.instance}} CGroup系统空间异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.012300077,
            "lastEvaluation": "2021-04-21T11:07:35.93853676+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.disk",
        "file": "/thanos-prometheus/config/rules/nodes/disk.rules",
        "rules": [
          {
            "state": "FIRING",
            "name": "主机磁盘写入速率异常",
            "query": "sum by(instance, host_group) (irate(node_disk_written_bytes_total{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[2m])) / 1024 / 1024 > 160",
            "duration": 300,
            "labels": {
              "alertname": "主机磁盘写入速率异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 磁盘写入速率异常,当前{{ $value | printf \"%.2f\" }}MB/s",
              "key": "nodes.disk.write_rate_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 磁盘写入速率异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "主机磁盘写入速率异常",
                  "host_group": "glusterfs-prod",
                  "instance": "172.16.31.19",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.19 主机组 glusterfs-prod 磁盘写入速率异常,当前761.55MB/s",
                  "key": "nodes.disk.write_rate_warning",
                  "summary": "主机 172.16.31.19 主机组 glusterfs-prod 磁盘写入速率异常",
                  "trigger": "761.5544921875022"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T16:55:43.659285132Z",
                "value": "7.615544921875022e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机磁盘写入速率异常",
                  "host_group": "glusterfs-prod",
                  "instance": "172.16.31.22",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.22 主机组 glusterfs-prod 磁盘写入速率异常,当前418.48MB/s",
                  "key": "nodes.disk.write_rate_warning",
                  "summary": "主机 172.16.31.22 主机组 glusterfs-prod 磁盘写入速率异常",
                  "trigger": "418.482161458333"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T17:00:13.659285132Z",
                "value": "4.18482161458333e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机磁盘写入速率异常",
                  "host_group": "glusterfs-prod",
                  "instance": "172.16.31.20",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.20 主机组 glusterfs-prod 磁盘写入速率异常,当前306.88MB/s",
                  "key": "nodes.disk.write_rate_warning",
                  "summary": "主机 172.16.31.20 主机组 glusterfs-prod 磁盘写入速率异常",
                  "trigger": "306.8801515209959"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T16:53:43.659285132Z",
                "value": "3.068801515209959e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机磁盘写入速率异常",
                  "host_group": "glusterfs-prod",
                  "instance": "172.16.31.21",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.21 主机组 glusterfs-prod 磁盘写入速率异常,当前471.39MB/s",
                  "key": "nodes.disk.write_rate_warning",
                  "summary": "主机 172.16.31.21 主机组 glusterfs-prod 磁盘写入速率异常",
                  "trigger": "471.3938151041694"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T12:50:13.659285132Z",
                "value": "4.713938151041694e+02",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.808722201,
            "lastEvaluation": "2021-04-21T11:07:44.194360404+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "主机磁盘读取速率异常",
            "query": "sum by(instance, host_group) (irate(node_disk_read_bytes_total{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[2m])) / 1024 / 1024 > 80",
            "duration": 300,
            "labels": {
              "alertname": "主机磁盘读取速率异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 磁盘读取速率异常,当前{{ $value | printf \"%.2f\" }}MB/s",
              "key": "nodes.disk.read_rate_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 磁盘读取速率异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.823877419,
            "lastEvaluation": "2021-04-21T11:07:45.042889379+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "分区使用率",
            "query": "100 - node_filesystem_avail_bytes{fstype!~\"rootfs|selinuxfs|autofs|rpc_pipefs|tmpfs|udev|none|devpts|sysfs|debugfs|fuse.*\",host_group!~\"ceph\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",mountpoint!~\"/var/lib/(kubelet|heketi)/.*\"} / node_filesystem_size_bytes{fstype!~\"rootfs|selinuxfs|autofs|rpc_pipefs|tmpfs|udev|none|devpts|sysfs|debugfs|fuse.*\",host_group!~\"ceph\",host_group!~\"develop.*|unknown-.*|Training-.*\",job=\"node-exporter\",mountpoint!~\"/var/lib/(kubelet|heketi)/.*\"} * 100 > 85",
            "duration": 43200,
            "labels": {
              "alertname": "分区使用率",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 使用率预警,当前 {{ $value | printf \"%.2f\" }}%",
              "key": "nodes.disk.filesystem_rate",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备{{ $labels.device }} 使用率预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/mapper/centos-home",
                  "fstype": "ext4",
                  "host_group": "bigdata",
                  "instance": "172.16.23.1",
                  "job": "node-exporter",
                  "mountpoint": "/home",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.1 主机组 bigdata 设备 /dev/mapper/centos-home 使用率预警,当前 85.48%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.1 主机组 bigdata 设备/dev/mapper/centos-home 使用率预警",
                  "trigger": "85.4834857967626"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "8.54834857967626e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdc1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.37",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk1",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.37 主机组 bigdata 设备 /dev/sdc1 使用率预警,当前 99.74%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.37 主机组 bigdata 设备/dev/sdc1 使用率预警",
                  "trigger": "99.7370647914282"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.97370647914282e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/mapper/centos_dn1-opt",
                  "fstype": "ext4",
                  "host_group": "bigdata",
                  "instance": "172.16.23.2",
                  "job": "node-exporter",
                  "mountpoint": "/opt",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.2 主机组 bigdata 设备 /dev/mapper/centos_dn1-opt 使用率预警,当前 100.00%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.2 主机组 bigdata 设备/dev/mapper/centos_dn1-opt 使用率预警",
                  "trigger": "100"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "1e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdb1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.38",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk0",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.38 主机组 bigdata 设备 /dev/sdb1 使用率预警,当前 99.67%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.38 主机组 bigdata 设备/dev/sdb1 使用率预警",
                  "trigger": "99.66714122184041"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.966714122184041e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdb1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.37",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk0",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.37 主机组 bigdata 设备 /dev/sdb1 使用率预警,当前 99.74%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.37 主机组 bigdata 设备/dev/sdb1 使用率预警",
                  "trigger": "99.73769267261234"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.973769267261234e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdc1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.39",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk1",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.39 主机组 bigdata 设备 /dev/sdc1 使用率预警,当前 99.73%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.39 主机组 bigdata 设备/dev/sdc1 使用率预警",
                  "trigger": "99.7346952545071"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.97346952545071e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdb1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.39",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk0",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.39 主机组 bigdata 设备 /dev/sdb1 使用率预警,当前 99.73%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.39 主机组 bigdata 设备/dev/sdb1 使用率预警",
                  "trigger": "99.72902895720306"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.972902895720306e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "分区使用率",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdc1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.38",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk1",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.38 主机组 bigdata 设备 /dev/sdc1 使用率预警,当前 99.18%",
                  "key": "nodes.disk.filesystem_rate",
                  "summary": "主机 172.16.23.38 主机组 bigdata 设备/dev/sdc1 使用率预警",
                  "trigger": "99.17755186733201"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "9.917755186733201e+01",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.092940073,
            "lastEvaluation": "2021-04-21T11:07:43.659573699+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "服务器分区未来48小时满额预测",
            "query": "predict_linear(node_filesystem_free_bytes{fstype!~\"rootfs|selinuxfs|autofs|rpc_pipefs|tmpfs|udev|none|devpts|sysfs|debugfs|fuse.*\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",mountpoint!~\"/var/lib/(kubelet|heketi)/.*\"}[2h], 48 * 3600) < 0",
            "duration": 43200,
            "labels": {
              "alertname": "服务器分区未来48小时满额预测",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 未来24小时满额预警,当前{{ $value | printf \"%.2f\" }}%",
              "key": "nodes.disk.filesystem_predict_linear_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 未来24小时满额预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "服务器分区未来48小时满额预测",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/vdb1",
                  "fstype": "ext4",
                  "host_group": "bigdata",
                  "instance": "172.16.31.146",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk1",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.146 主机组 bigdata 设备 /dev/vdb1 未来24小时满额预警,当前-9318807180.78%",
                  "key": "nodes.disk.filesystem_predict_linear_warning",
                  "summary": "主机 172.16.31.146 主机组 bigdata 设备 /dev/vdb1 未来24小时满额预警",
                  "trigger": "-9.318807180784698e+09"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T01:23:43.659285132Z",
                "value": "-9.318807180784698e+09",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "服务器分区未来48小时满额预测",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/vda2",
                  "fstype": "ext4",
                  "host_group": "bigdata",
                  "instance": "172.16.31.147",
                  "job": "node-exporter",
                  "mountpoint": "/",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.147 主机组 bigdata 设备 /dev/vda2 未来24小时满额预警,当前-54452148809.57%",
                  "key": "nodes.disk.filesystem_predict_linear_warning",
                  "summary": "主机 172.16.31.147 主机组 bigdata 设备 /dev/vda2 未来24小时满额预警",
                  "trigger": "-5.44521488095659e+10"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:21:13.659285132Z",
                "value": "-5.44521488095659e+10",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "服务器分区未来48小时满额预测",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/vda2",
                  "fstype": "ext4",
                  "host_group": "bigdata",
                  "instance": "172.16.31.206",
                  "job": "node-exporter",
                  "mountpoint": "/",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.206 主机组 bigdata 设备 /dev/vda2 未来24小时满额预警,当前-48748194860.65%",
                  "key": "nodes.disk.filesystem_predict_linear_warning",
                  "summary": "主机 172.16.31.206 主机组 bigdata 设备 /dev/vda2 未来24小时满额预警",
                  "trigger": "-4.874819486065355e+10"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:17:13.659285132Z",
                "value": "-4.874819486065355e+10",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "服务器分区未来48小时满额预测",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/sdc1",
                  "fstype": "xfs",
                  "host_group": "bigdata",
                  "instance": "172.16.23.38",
                  "job": "node-exporter",
                  "mountpoint": "/data/disk1",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.38 主机组 bigdata 设备 /dev/sdc1 未来24小时满额预警,当前-182840762679.54%",
                  "key": "nodes.disk.filesystem_predict_linear_warning",
                  "summary": "主机 172.16.23.38 主机组 bigdata 设备 /dev/sdc1 未来24小时满额预警",
                  "trigger": "-1.8284076267953876e+11"
                },
                "state": "PENDING",
                "activeAt": "2021-04-20T20:45:43.659285132Z",
                "value": "-1.8284076267953876e+11",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.178196404,
            "lastEvaluation": "2021-04-21T11:07:43.843530877+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "磁盘IO耗时异常",
            "query": "irate(node_disk_io_time_seconds_total{device=~\"sd[a-z]\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m]) > 10",
            "duration": 300,
            "labels": {
              "alertname": "磁盘IO耗时异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘IO耗时异常,当前{{ $value }}s",
              "key": "nodes.disk.io_time_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘IO耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.037096611,
            "lastEvaluation": "2021-04-21T11:07:44.157257908+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "磁盘写入IOPS异常",
            "query": "irate(node_disk_writes_completed_total{device=~\"sd[a-z]\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m]) > 1000",
            "duration": 300,
            "labels": {
              "alertname": "磁盘写入IOPS异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘写入IOPS异常,当前{{ $value }}",
              "key": "nodes.disk.write_iops_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘写入IOPS耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.039796289,
            "lastEvaluation": "2021-04-21T11:07:45.003089312+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "磁盘写入耗时异常",
            "query": "irate(node_disk_write_time_seconds_total{device=~\"sd[a-z]\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[5m]) > 10",
            "duration": 300,
            "labels": {
              "alertname": "磁盘写入耗时异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘写入耗时异常,当前{{ $value }}s",
              "key": "nodes.disk.write_time_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘写入耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "磁盘写入耗时异常",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "sdc",
                  "host_group": "kvm-host-machine",
                  "instance": "172.16.23.36",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.23.36 主机组 kvm-host-machine 设备 sdc 磁盘写入耗时异常,当前51.58943333333979s",
                  "key": "nodes.disk.write_time_warning",
                  "summary": "主机 172.16.23.36 主机组 kvm-host-machine 设备 sdc 磁盘写入耗时异常",
                  "trigger": "51.58943333333979"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:06:43.659285132Z",
                "value": "5.158943333333979e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "磁盘写入耗时异常",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "sda",
                  "host_group": "devops",
                  "instance": "172.16.31.14",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.14 主机组 devops 设备 sda 磁盘写入耗时异常,当前14.908666666674739s",
                  "key": "nodes.disk.write_time_warning",
                  "summary": "主机 172.16.31.14 主机组 devops 设备 sda 磁盘写入耗时异常",
                  "trigger": "14.908666666674739"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T03:06:43.659285132Z",
                "value": "1.4908666666674739e+01",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.045681656,
            "lastEvaluation": "2021-04-21T11:07:44.021733498+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "磁盘只读",
            "query": "node_filesystem_readonly{fstype!~\"rootfs|selinuxfs|autofs|rpc_pipefs|tmpfs|udev|none|devpts|sysfs|debugfs|fuse.*\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",mountpoint!~\"/var/lib/(kubelet|heketi)/.*\"} == 1",
            "duration": 60,
            "labels": {
              "alertname": "磁盘只读",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 只读,当前{{ $value }}",
              "key": "nodes.disk.readonly",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 只读",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "磁盘只读",
                  "cloud_cluster": "cloud-bj-center",
                  "device": "/dev/mapper/test--node10--vg-root",
                  "fstype": "ext4",
                  "host_group": "cloud-prod-1",
                  "instance": "172.16.31.10",
                  "job": "node-exporter",
                  "mountpoint": "/",
                  "prometheus": "standard",
                  "type": "nodes.disk"
                },
                "annotations": {
                  "description": "主机 172.16.31.10 主机组 cloud-prod-1 设备 /dev/mapper/test--node10--vg-root 只读,当前1",
                  "key": "nodes.disk.readonly",
                  "summary": "主机 172.16.31.10 主机组 cloud-prod-1 设备 /dev/mapper/test--node10--vg-root 只读",
                  "trigger": "1"
                },
                "state": "FIRING",
                "activeAt": "2021-04-19T09:58:43.659285132Z",
                "value": "1e+00",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.089830903,
            "lastEvaluation": "2021-04-21T11:07:44.067422434+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "磁盘读取IOPS异常",
            "query": "irate(node_disk_reads_completed_total{device=~\"sd[a-z]\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m]) > 1000",
            "duration": 300,
            "labels": {
              "alertname": "磁盘读取IOPS异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘读取IOPS异常,当前{{ $value }}",
              "key": "nodes.disk.read_iops_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘读取IOPS耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.045338895,
            "lastEvaluation": "2021-04-21T11:07:43.752517496+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "磁盘读取耗时异常",
            "query": "irate(node_disk_read_time_seconds_total{device=~\"sd[a-z]\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[5m]) > 5",
            "duration": 300,
            "labels": {
              "alertname": "磁盘读取耗时异常",
              "type": "nodes.disk"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘读取耗时异常,当前{{ $value }}s",
              "key": "nodes.disk.read_time_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 磁盘读取耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.045668509,
            "lastEvaluation": "2021-04-21T11:07:43.797859192+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.gpu",
        "file": "/thanos-prometheus/config/rules/nodes/gpu.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "GPU使用率达标",
            "query": "avg_over_time(nvidia_gpu_duty_cycle{job=\"gpu-exporter\"}[1w]) > 100",
            "duration": 604800,
            "labels": {
              "alertname": "GPU使用率达标",
              "type": "nodes.gpu"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 过去24小时使用率达标,平均使用率 {{ $value | printf \"%.2f\"}}%",
              "key": "nodes.gpu.avg_over_time_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 过去24小时平均使用率达标",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.719635253,
            "lastEvaluation": "2021-04-21T11:07:45.686028569+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GPU使用率过低",
            "query": "max_over_time(nvidia_gpu_duty_cycle{job=\"gpu-exporter\"}[1w]) < 0",
            "duration": 604800,
            "labels": {
              "alertname": "GPU使用率过低",
              "type": "nodes.gpu"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 过去24小时最大使用率过低,最大值{{ $value | printf \"%.2f\" }}%",
              "key": "nodes.gpu.max_over_time_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 过去24小时最大使用率过低",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.666256144,
            "lastEvaluation": "2021-04-21T11:07:46.405666599+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GPU温度预警",
            "query": "nvidia_gpu_temperature_celsius{job=\"gpu-exporter\"} > 80",
            "duration": 600,
            "labels": {
              "alertname": "GPU温度预警",
              "type": "nodes.gpu"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 温度预警，当前{{ $value }}度",
              "key": "nodes.gpu.nvidia_gpu_temperature_celsius_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} GPU型号 {{ $labels.name }} 设备 {{ $labels.minor_number }} 温度预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.02399263,
            "lastEvaluation": "2021-04-21T11:07:47.07193007+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.network",
        "file": "/thanos-prometheus/config/rules/nodes/network.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "网卡上行丢弃包",
            "query": "ceil(irate(node_network_transmit_drop_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m])) > 100 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡上行丢弃包",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备{{ $labels.device }} 上行数据包丢弃,个数{{ $value }}",
              "key": "nodes.network.transmit_drop_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 上行数据包丢弃",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.064501019,
            "lastEvaluation": "2021-04-21T11:07:40.732603121+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "网卡上行流量",
            "query": "irate(node_network_transmit_bytes_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m]) / 1024 / 1024 > 600 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡上行流量",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 上行流量异常,速率{{ $value | printf \"%.2f\" }}MB/s",
              "key": "nodes.network.transmit",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 上行流量异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.074128501,
            "lastEvaluation": "2021-04-21T11:07:40.457306797+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "网卡上行错误包",
            "query": "ceil(irate(node_network_transmit_errs_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m])) > 100 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡上行错误包",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 上行数据包错误,个数{{ $value }}",
              "key": "nodes.network.transmit_error_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 上行数据包错误",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.068751815,
            "lastEvaluation": "2021-04-21T11:07:40.531442351+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "网卡下行丢弃包",
            "query": "ceil(irate(node_network_receive_drop_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m])) > 100 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡下行丢弃包",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行数据包丢弃,个数{{ $value }}",
              "key": "nodes.network.receive_drop_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行数据包",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.074514748,
            "lastEvaluation": "2021-04-21T11:07:40.797109544+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "网卡下行流量",
            "query": "irate(node_network_receive_bytes_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m]) / 1024 / 1024 > 600 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡下行流量",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行流量异常,速率{{ $value | printf \"%.2f\" }}MB/s",
              "key": "nodes.network.receive",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行流量异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.071834621,
            "lastEvaluation": "2021-04-21T11:07:40.660761768+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "网卡下行错误包",
            "query": "ceil(irate(node_network_receive_errs_total{device!~\"(cali.*|veth.*|kube.*|vnet.*|lo|flannel.*|docker.*|virbr.*|br.*|ovs.*|tun.*|run.*|cni.*)\",host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\"}[1m])) > 100 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 300,
            "labels": {
              "alertname": "网卡下行错误包",
              "type": "nodes.network"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行数据包错误,个数{{ $value }}",
              "key": "nodes.network.receive_error_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 设备 {{ $labels.device }} 下行数据包错误",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.060554835,
            "lastEvaluation": "2021-04-21T11:07:40.60020091+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.process",
        "file": "/thanos-prometheus/config/rules/nodes/process.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "D状态进程(等待IO进程)",
            "query": "node_processes_state{host_group=~\"cloud-prod.*\",state=\"D\"} > 20",
            "duration": 60,
            "labels": {
              "alertname": "D状态进程(等待IO进程)",
              "type": "nodes.process"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现D状态进程,数量{{ $value }}",
              "key": "nodes.base.process.d",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现D状态进程",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005185622,
            "lastEvaluation": "2021-04-21T11:07:35.642048652+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Z状态进程(僵尸进程)",
            "query": "node_processes_state{host_group=~\"cloud-prod.*\",state=\"Z\"} > 30",
            "duration": 60,
            "labels": {
              "alertname": "Z状态进程(僵尸进程)",
              "type": "nodes.process"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现僵尸进程,数量{{ $value }}",
              "key": "nodes.base.process.z",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现僵尸进程",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006940526,
            "lastEvaluation": "2021-04-21T11:07:35.536140153+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "主机进程状态",
            "query": "node_process_status == 0",
            "duration": 0,
            "labels": {
              "alertname": "主机进程状态",
              "type": "nodes.process"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 上 项目 {{ $labels.project }} 服务进程 {{ $labels.app }} 状态异常,当前状态{{ $value }}",
              "key": "nodes.base.process.status",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 上 项目 {{ $labels.project }} 服务进程 {{ $labels.app }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.008798965,
            "lastEvaluation": "2021-04-21T11:07:35.543085112+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "活跃进程数",
            "query": "node_procs_running{host_group!~\"|develop.*|unknown.*|Training.*\",job=~\"node-exporter\"} > 800",
            "duration": 300,
            "labels": {
              "alertname": "活跃进程数",
              "type": "nodes.process"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 活跃进程数{{ $value }}个存在风险",
              "key": "nodes.base.node_procs_running",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 活跃进程数",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.008825122,
            "lastEvaluation": "2021-04-21T11:07:35.551889092+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "进程IO阻塞",
            "query": "node_procs_blocked{host_group!~\"|develop.*|unknown.*|Training.*\",job=~\"node-exporter\"} > 10",
            "duration": 60,
            "labels": {
              "alertname": "进程IO阻塞",
              "type": "nodes.process"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现阻塞进程{{ $value }}个",
              "key": "nodes.base.io_blocked",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} 发现阻塞进程",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.081326214,
            "lastEvaluation": "2021-04-21T11:07:35.560717304+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "nodes.socket",
        "file": "/thanos-prometheus/config/rules/nodes/sockets.rules",
        "rules": [
          {
            "state": "FIRING",
            "name": "主机TCP连接状态CloseWait",
            "query": "node_tcp_connection_states{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",state=\"close_wait\"} > 500",
            "duration": 300,
            "labels": {
              "alertname": "主机TCP连接状态CloseWait",
              "type": "nodes.sockets"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Close_Wait状态异常,当前{{ $value }}",
              "key": "nodes.socket.closewait",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Close_Wait状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "主机TCP连接状态CloseWait",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "cloud-prod-1",
                  "instance": "172.16.31.10",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "state": "close_wait",
                  "type": "nodes.sockets"
                },
                "annotations": {
                  "description": "主机 172.16.31.10 主机组 cloud-prod-1 Close_Wait状态异常,当前2729",
                  "key": "nodes.socket.closewait",
                  "summary": "主机 172.16.31.10 主机组 cloud-prod-1 Close_Wait状态异常",
                  "trigger": "2729"
                },
                "state": "FIRING",
                "activeAt": "2021-04-17T04:04:59.993960111Z",
                "value": "2.729e+03",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机TCP连接状态CloseWait",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "bigdata",
                  "instance": "172.16.31.109",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "state": "close_wait",
                  "type": "nodes.sockets"
                },
                "annotations": {
                  "description": "主机 172.16.31.109 主机组 bigdata Close_Wait状态异常,当前768",
                  "key": "nodes.socket.closewait",
                  "summary": "主机 172.16.31.109 主机组 bigdata Close_Wait状态异常",
                  "trigger": "768"
                },
                "state": "FIRING",
                "activeAt": "2021-04-15T10:31:29.993960111Z",
                "value": "7.68e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "主机TCP连接状态CloseWait",
                  "cloud_cluster": "cloud-bj-center",
                  "host_group": "cloud-prod-4",
                  "instance": "172.16.31.28",
                  "job": "node-exporter",
                  "prometheus": "standard",
                  "state": "close_wait",
                  "type": "nodes.sockets"
                },
                "annotations": {
                  "description": "主机 172.16.31.28 主机组 cloud-prod-4 Close_Wait状态异常,当前5693",
                  "key": "nodes.socket.closewait",
                  "summary": "主机 172.16.31.28 主机组 cloud-prod-4 Close_Wait状态异常",
                  "trigger": "5693"
                },
                "state": "FIRING",
                "activeAt": "2021-04-20T22:14:29.993960111Z",
                "value": "5.693e+03",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.010792737,
            "lastEvaluation": "2021-04-21T11:07:30.005530248+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "主机TCP连接状态FinWait2",
            "query": "node_tcp_connection_states{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",state=\"fin_wait2\"} > 500",
            "duration": 300,
            "labels": {
              "alertname": "主机TCP连接状态FinWait2",
              "type": "nodes.sockets"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Fin_Wait2状态异常,当前{{ $value }}",
              "key": "nodes.socket.finwait2_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Fin_Wait2状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007381704,
            "lastEvaluation": "2021-04-21T11:07:29.994289823+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "主机TCP连接状态SynSent",
            "query": "node_tcp_connection_states{host_group!~\"|develop.*|unknown.*|Training.*\",job=\"node-exporter\",state=\"SynSent\"} > 500",
            "duration": 300,
            "labels": {
              "alertname": "主机TCP连接状态SynSent",
              "type": "nodes.sockets"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Syn_Sent状态异常,当前{{ $value }}",
              "key": "nodes.socket.synsent_warning",
              "summary": "主机 {{ $labels.instance }} 主机组 {{ $labels.host_group }} Syn_Sent状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003848496,
            "lastEvaluation": "2021-04-21T11:07:30.001677592+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "others.cert",
        "file": "/thanos-prometheus/config/rules/others/certs.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "域名过期",
            "query": "domain_not_after < 57 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 1200,
            "labels": {
              "alertname": "域名过期",
              "type": "others.certs"
            },
            "annotations": {
              "description": "域名{{ $labels.domain }} 过期时间不足60天,剩余 {{ $value }} 天,过期时间为{{ $labels.expired }}",
              "key": "others.cert.domain_not_after",
              "summary": "域名 {{ $labels.domain }} 过期时间不足60天",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.011099284,
            "lastEvaluation": "2021-04-21T11:07:43.446246255+08:00",
            "type": "alerting"
          },
          {
            "state": "FIRING",
            "name": "证书过期",
            "query": "ssl_cert_not_after < 60 and on() hour() > 0 < 15 or on() hour() > 22",
            "duration": 1200,
            "labels": {
              "alertname": "证书过期",
              "type": "others.certs"
            },
            "annotations": {
              "description": "证书 {{ $labels.issuer_cn }} 过期时间不足60天,剩余 {{ $value }} 天,过期时间为 {{ $labels.expired }},所在服务器 {{ $labels.server }}",
              "key": "others.cert.ssl_cert_not_after",
              "summary": "证书 {{ $labels.issuer_cn }} 过期时间不足60天",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "airaman.com,cpanel.airaman.com,mail.airaman.com,webmail.airaman.com,www.airaman.com",
                  "expired": "2021-06-01 13:28:46",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "R3",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "375089323781797570383582525960359404630946",
                  "server": "mail.airaman.com",
                  "subject_cn": "cpanel.airaman.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 R3 过期时间不足60天,剩余 41.431874547815326 天,过期时间为 2021-06-01 13:28:46,所在服务器 mail.airaman.com",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 R3 过期时间不足60天",
                  "trigger": "41.431874547815326"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "4.1431874547815326e+01",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "localhost,localhost.localdomain,ip-172-31-23-236,ip-172-31-23-236.ap-northeast-1.compute.internal",
                  "expired": "2019-07-10 06:07:15",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "ip-172-31-23-236",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "18332",
                  "server": "52.196.191.223",
                  "subject_cn": "ip-172-31-23-236",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 ip-172-31-23-236 过期时间不足60天,剩余 -650.8747342493089 天,过期时间为 2019-07-10 06:07:15,所在服务器 52.196.191.223",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 ip-172-31-23-236 过期时间不足60天",
                  "trigger": "-650.8747342493089"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-6.508747342493089e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "expired": "2020-01-25 15:55:52",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "localhost.localdomain",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "16345",
                  "server": "52.77.230.223",
                  "subject_cn": "localhost.localdomain",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 localhost.localdomain 过期时间不足60天,剩余 -451.46597267486123 天,过期时间为 2020-01-25 15:55:52,所在服务器 52.77.230.223",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 localhost.localdomain 过期时间不足60天",
                  "trigger": "-451.46597267486123"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-4.5146597267486123e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "*.airaman.com,airaman.com",
                  "expired": "2020-09-10 12:00:00",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "GeoTrust CN RSA CA G1",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "15591453386936651144739918671794143419",
                  "server": "13.57.9.121",
                  "subject_cn": "*.airaman.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 GeoTrust CN RSA CA G1 过期时间不足60天,剩余 -222.62976897194088 天,过期时间为 2020-09-10 12:00:00,所在服务器 13.57.9.121",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 GeoTrust CN RSA CA G1 过期时间不足60天",
                  "trigger": "-222.62976897194088"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-2.2262976897194088e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "*.airaman.com,airaman.com",
                  "expired": "2020-09-10 12:00:00",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "GeoTrust CN RSA CA G1",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "15591453386936651144739918671794143419",
                  "server": "35.238.229.19",
                  "subject_cn": "*.airaman.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 GeoTrust CN RSA CA G1 过期时间不足60天,剩余 -222.62976897138446 天,过期时间为 2020-09-10 12:00:00,所在服务器 35.238.229.19",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 GeoTrust CN RSA CA G1 过期时间不足60天",
                  "trigger": "-222.62976897138446"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-2.2262976897138446e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "*.airaman.com,airaman.com",
                  "expired": "2020-09-10 12:00:00",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "GeoTrust CN RSA CA G1",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "15591453386936651144739918671794143419",
                  "server": "47.92.134.204",
                  "subject_cn": "*.airaman.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 GeoTrust CN RSA CA G1 过期时间不足60天,剩余 -222.62976897130554 天,过期时间为 2020-09-10 12:00:00,所在服务器 47.92.134.204",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 GeoTrust CN RSA CA G1 过期时间不足60天",
                  "trigger": "-222.62976897130554"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-2.2262976897130554e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "*.cloudminds.com,cloudminds.com",
                  "expired": "2020-10-10 12:00:00",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "GeoTrust RSA CA 2018",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "18367233634942244861580992493209170566",
                  "server": "10.11.35.49",
                  "subject_cn": "*.cloudminds.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 GeoTrust RSA CA 2018 过期时间不足60天,剩余 -192.62976897145384 天,过期时间为 2020-10-10 12:00:00,所在服务器 10.11.35.49",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 GeoTrust RSA CA 2018 过期时间不足60天",
                  "trigger": "-192.62976897145384"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-1.9262976897145384e+02",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "证书过期",
                  "cloud_cluster": "cloud-bj-center",
                  "domain": "*.cloudminds.com,cloudminds.com",
                  "expired": "2020-10-10 12:00:00",
                  "instance": "172.16.31.9:9999",
                  "issuer_cn": "GeoTrust RSA CA 2018",
                  "job": "ssl-domain",
                  "prometheus": "standard",
                  "serial_no": "18367233634942244861580992493209170566",
                  "server": "218.189.28.120",
                  "subject_cn": "*.cloudminds.com",
                  "type": "others.certs"
                },
                "annotations": {
                  "description": "证书 GeoTrust RSA CA 2018 过期时间不足60天,剩余 -192.6297689716953 天,过期时间为 2020-10-10 12:00:00,所在服务器 218.189.28.120",
                  "key": "others.cert.ssl_cert_not_after",
                  "summary": "证书 GeoTrust RSA CA 2018 过期时间不足60天",
                  "trigger": "-192.6297689716953"
                },
                "state": "FIRING",
                "activeAt": "2021-04-21T01:00:13.44602523Z",
                "value": "-1.926297689716953e+02",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.016226806,
            "lastEvaluation": "2021-04-21T11:07:43.45734882+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "others.exporter",
        "file": "/thanos-prometheus/config/rules/others/exporter.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "cloud-exporter存活探针",
            "query": "cloud_exporter_up == 0",
            "duration": 300,
            "labels": {
              "alertname": "cloud-exporter存活探针",
              "type": "others.exporter"
            },
            "annotations": {
              "description": "主机 {{ $labels.instance }} cloud_exporter 模块 {{ $labels.module }} 状态异常",
              "key": "others.exporter.cloud_exporter_up",
              "summary": "主机 {{ $labels.instance }} cloud_exporter 模块 {{ $labels.module }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.023252926,
            "lastEvaluation": "2021-04-21T11:07:23.965543128+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "es-exporter存活探针",
            "query": "es_exporter_up == 0",
            "duration": 300,
            "labels": {
              "alertname": "es-exporter存活探针",
              "type": "others.exporter"
            },
            "annotations": {
              "description": "主机 {{ $labels.node_ip }} es_exporter 模块 {{ $labels.module }} 状态异常",
              "key": "others.exporter.es_exporter_up",
              "summary": "主机 {{ $labels.node_ip }} es_exporter 模块 {{ $labels.module }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.003380708,
            "lastEvaluation": "2021-04-21T11:07:23.962156035+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "storage.ceph",
        "file": "/thanos-prometheus/config/rules/storage/ceph.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "Ceph健康状态",
            "query": "ceph_health_status != 1",
            "duration": 60,
            "labels": {
              "alertname": "Ceph健康状态",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "ceph集群健康检查状态异常,ceph_health_status 为{{ $value }}",
              "key": "storage.ceph.health_warning",
              "summary": "Ceph集群健康检查状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.11781689,
            "lastEvaluation": "2021-04-21T11:07:46.573646158+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群IOPS",
            "query": "ceph_client_io_ops > 1000",
            "duration": 300,
            "labels": {
              "alertname": "Ceph集群IOPS",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群IOPS过高,当前{{ $value }}",
              "key": "storage.ceph.total_bytes_high_warning",
              "summary": "Ceph集群IOPS过高,超过1000",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.03621159,
            "lastEvaluation": "2021-04-21T11:07:46.045318703+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群OSD容量可用率",
            "query": "(ceph_osd_avail_bytes / ceph_osd_bytes) * 100 < 10",
            "duration": 86400,
            "labels": {
              "alertname": "Ceph集群OSD容量可用率",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群{{ $labels.osd }}容量可用率低于10%,当前可用率{{ $value| printf \"%.2f\" }}%",
              "key": "storage.ceph.osd_rate_warning",
              "summary": "Ceph集群{{ $labels.osd }}容量可用率低于10%",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.078318761,
            "lastEvaluation": "2021-04-21T11:07:46.495321314+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群OSD文件系统apply延迟",
            "query": "ceph_osd_perf_apply_latency_seconds * 1000 > 10000",
            "duration": 300,
            "labels": {
              "alertname": "Ceph集群OSD文件系统apply延迟",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群{{ $labels.osd }}IO apply延迟过高,当前{{ $value }}s",
              "key": "storage.ceph.osd_apply_delay_warning",
              "summary": "Ceph集群{{ $labels.osd }}IO apply延迟过高,超过10000",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.015218742,
            "lastEvaluation": "2021-04-21T11:07:46.081541221+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群OSD文件系统commit延迟",
            "query": "ceph_osd_perf_commit_latency_seconds * 1000 > 10000",
            "duration": 300,
            "labels": {
              "alertname": "Ceph集群OSD文件系统commit延迟",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群{{ $labels.osd }}IO commit延迟过高,当前{{ $value }}s",
              "key": "storage.ceph.osd_commit_delay_warning",
              "summary": "Ceph集群{{ $labels.osd }}IO commit延迟过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.082749087,
            "lastEvaluation": "2021-04-21T11:07:46.193775198+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群OSD状态",
            "query": "ceph_osds_down{cluster=\"ceph\"} != 0",
            "duration": 60,
            "labels": {
              "alertname": "Ceph集群OSD状态",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群OSD掉线{{ $value }}个",
              "key": "storage.ceph.status_osd",
              "summary": "Ceph集群OSD掉线",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.097005328,
            "lastEvaluation": "2021-04-21T11:07:46.096763357+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群Quorum协议",
            "query": "abs(delta(ceph_monitor_quorum_count[1m])) > 1",
            "duration": 300,
            "labels": {
              "alertname": "Ceph集群Quorum协议",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群Monitor节点Quorum变更{{ $value }}",
              "key": "storage.ceph.quorum_warning",
              "summary": "Ceph集群Monitor节点Quorum变更",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.026362086,
            "lastEvaluation": "2021-04-21T11:07:46.381749594+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群总容量",
            "query": "(ceph_cluster_available_bytes / ceph_cluster_capacity_bytes) * 100 < 8",
            "duration": 86400,
            "labels": {
              "alertname": "Ceph集群总容量",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群容量过低,当前{{ $value | printf \"%.2f\" }}%",
              "key": "storage.ceph.total_bytes_low_bytes",
              "summary": "Ceph集群容量过低,不足8%",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.08253636,
            "lastEvaluation": "2021-04-21T11:07:46.691468718+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "Ceph集群慢请求",
            "query": "ceph_slow_requests > 0",
            "duration": 60,
            "labels": {
              "alertname": "Ceph集群慢请求",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "Ceph集群发现慢请求,当前{{ $value }}个",
              "key": "storage.ceph.slow_requests_warning",
              "summary": "Ceph集群发现慢请求",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.087200398,
            "lastEvaluation": "2021-04-21T11:07:46.408115046+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "磁盘坏道检测",
            "query": "disk_bad_sectors_status == 1",
            "duration": 30,
            "labels": {
              "alertname": "磁盘坏道检测",
              "type": "storage.ceph"
            },
            "annotations": {
              "description": "主机 {{ $labels.node_ip }} 磁盘主节点 {{ $labels.master_node}} ，设备sg {{ $labels.sg_info }} Bad Blocks，当前值 {{ $value }}",
              "key": "storage.ceph.bad_block",
              "summary": "主机 {{ $labels.node_ip }} 磁盘主节点 {{ $labels.master_node}} ，设备sg {{ $labels.sg_info }} Bad Blocks",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.105214441,
            "lastEvaluation": "2021-04-21T11:07:46.276531758+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "storage.glusterfs",
        "file": "/thanos-prometheus/config/rules/storage/glusterfs.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Brick_Inode剩余率",
            "query": "(gluster_brick_inodes_free / gluster_brick_inodes_total) * 100 < 10",
            "duration": 43200,
            "labels": {
              "alertname": "GlusterFS_Brick_Inode剩余率",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.host }} 上 {{ $labels.volume}} inode可用率过低,当前 {{ $value| printf \"%.2f\" }}%",
              "key": "storage.glusterfs.inode_rate",
              "summary": "GlusterFS主机 {{ $labels.host }} 上 {{ $labels.volume}} inode可用率过低",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.107542594,
            "lastEvaluation": "2021-04-21T11:07:35.924125339+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Brick_Inode未来48小时满额预警",
            "query": "min by(volume) (predict_linear(gluster_brick_inodes_free[1h], 48 * 3600)) < 0",
            "duration": 21600,
            "labels": {
              "alertname": "GlusterFS_Brick_Inode未来48小时满额预警",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} inode未来48小时满额预警,当前{{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.inode_predict_linear",
              "summary": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} inode未来48小时满额预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.114640039,
            "lastEvaluation": "2021-04-21T11:07:35.708539651+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Brick剩余率",
            "query": "(gluster_brick_capacity_free_bytes / gluster_brick_capacity_bytes_total) * 100 < 10",
            "duration": 43200,
            "labels": {
              "alertname": "GlusterFS_Brick剩余率",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.host }} 上 {{ $labels.volume}} 可用率过低,当前 {{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.brick_free",
              "summary": "GlusterFS主机 {{ $labels.host }} 上 {{ $labels.volume}} 可用率过低",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.148713961,
            "lastEvaluation": "2021-04-21T11:07:35.559820009+08:00",
            "type": "alerting"
          },
          {
            "state": "PENDING",
            "name": "GlusterFS_Brick未来48小时满额预警",
            "query": "predict_linear(gluster_brick_capacity_free_bytes[2h], 48 * 3600) < 0",
            "duration": 21600,
            "labels": {
              "alertname": "GlusterFS_Brick未来48小时满额预警",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 未来48小时满额预警,当前{{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.brick_predict_linear",
              "summary": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 未来48小时满额预警",
              "trigger": "{{ $value }}"
            },
            "alerts": [
              {
                "labels": {
                  "alertname": "GlusterFS_Brick未来48小时满额预警",
                  "brick_path": "/var/lib/heketi/mounts/vg_929e45b20519c80a714d7645061e354f/brick_dc9a4ca3841e6a13ada1814dc50413fa/brick",
                  "cloud_cluster": "cloud-bj-center",
                  "cluster_id": "default",
                  "glusterfs": "prod",
                  "host": "10.51.2.20",
                  "instance": "172.16.31.20:8080",
                  "job": "gluster-prod",
                  "prometheus": "standard",
                  "subvolume": "vol_c7e88cb4ec9b7778559ba0ddc967a432-distributed-replicate-1",
                  "type": "storage.glusterfs",
                  "volume": "vol_c7e88cb4ec9b7778559ba0ddc967a432"
                },
                "annotations": {
                  "description": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警,当前-3097164865.12%",
                  "key": "storage.glusterfs.brick_predict_linear",
                  "summary": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警",
                  "trigger": "-3.0971648651248007e+09"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:43:05.559640429Z",
                "value": "-3.0971648651248007e+09",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "GlusterFS_Brick未来48小时满额预警",
                  "brick_path": "/var/lib/heketi/mounts/vg_929e45b20519c80a714d7645061e354f/brick_dc9a4ca3841e6a13ada1814dc50413fa/brick",
                  "cloud_cluster": "cloud-bj-center",
                  "cluster_id": "default",
                  "glusterfs": "prod",
                  "host": "10.51.2.20",
                  "instance": "172.16.31.20:8080",
                  "job": "gluster-prod",
                  "prometheus": "standard",
                  "subvolume": "vol_c7e88cb4ec9b7778559ba0ddc967a432-distributed-replicate-3",
                  "type": "storage.glusterfs",
                  "volume": "vol_c7e88cb4ec9b7778559ba0ddc967a432"
                },
                "annotations": {
                  "description": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警,当前-3097164865.12%",
                  "key": "storage.glusterfs.brick_predict_linear",
                  "summary": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警",
                  "trigger": "-3.0971648651248007e+09"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:43:05.559640429Z",
                "value": "-3.0971648651248007e+09",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "GlusterFS_Brick未来48小时满额预警",
                  "brick_path": "/var/lib/heketi/mounts/vg_929e45b20519c80a714d7645061e354f/brick_dc9a4ca3841e6a13ada1814dc50413fa/brick",
                  "cloud_cluster": "cloud-bj-center",
                  "cluster_id": "default",
                  "glusterfs": "prod",
                  "host": "10.51.2.20",
                  "instance": "172.16.31.20:8080",
                  "job": "gluster-prod",
                  "prometheus": "standard",
                  "subvolume": "vol_c7e88cb4ec9b7778559ba0ddc967a432-distributed-replicate-2",
                  "type": "storage.glusterfs",
                  "volume": "vol_c7e88cb4ec9b7778559ba0ddc967a432"
                },
                "annotations": {
                  "description": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警,当前-3097164865.12%",
                  "key": "storage.glusterfs.brick_predict_linear",
                  "summary": "GlusterFS主机 172.16.31.20:8080 上 vol_c7e88cb4ec9b7778559ba0ddc967a432 未来48小时满额预警",
                  "trigger": "-3.0971648651248007e+09"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:43:05.559640429Z",
                "value": "-3.0971648651248007e+09",
                "partialResponseStrategy": "ABORT"
              },
              {
                "labels": {
                  "alertname": "GlusterFS_Brick未来48小时满额预警",
                  "brick_path": "/var/lib/heketi/mounts/vg_f62fa23a3be2ba96526089d1580137d5/brick_c04132c4968960644d94caae5722211c/brick",
                  "cloud_cluster": "cloud-bj-center",
                  "cluster_id": "default",
                  "glusterfs": "prod",
                  "host": "10.51.2.22",
                  "instance": "172.16.31.22:8080",
                  "job": "gluster-prod",
                  "prometheus": "standard",
                  "subvolume": "vol_2c1827c3bd2bf2a667023cb5c593bc9b-replicate-0",
                  "type": "storage.glusterfs",
                  "volume": "vol_2c1827c3bd2bf2a667023cb5c593bc9b"
                },
                "annotations": {
                  "description": "GlusterFS主机 172.16.31.22:8080 上 vol_2c1827c3bd2bf2a667023cb5c593bc9b 未来48小时满额预警,当前-1051197737.04%",
                  "key": "storage.glusterfs.brick_predict_linear",
                  "summary": "GlusterFS主机 172.16.31.22:8080 上 vol_2c1827c3bd2bf2a667023cb5c593bc9b 未来48小时满额预警",
                  "trigger": "-1.0511977370365977e+09"
                },
                "state": "PENDING",
                "activeAt": "2021-04-21T02:51:35.559640429Z",
                "value": "-1.0511977370365977e+09",
                "partialResponseStrategy": "ABORT"
              }
            ],
            "health": "ok",
            "evaluationTime": 0.197997868,
            "lastEvaluation": "2021-04-21T11:07:36.226458463+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Brick状态",
            "query": "gluster_volume_brick_status == 0",
            "duration": 300,
            "labels": {
              "alertname": "GlusterFS_Brick状态",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.hostname }} 上 {{ $labels.volume_name }} 状态异常,状态Down",
              "key": "storage.glusterfs.status_brick",
              "summary": "GlusterFS主机 {{ $labels.hostname }} 上 {{ $labels.volume_name }} 状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.066420271,
            "lastEvaluation": "2021-04-21T11:07:36.127845586+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Peer状态",
            "query": "gluster_peer_connected != 1",
            "duration": 300,
            "labels": {
              "alertname": "GlusterFS_Peer状态",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance }} 集群连接异常,状态{{ $value }}",
              "key": "storage.glusterfs.status_peer",
              "summary": "GlusterFS主机 {{ $labels.instance }} 集群连接异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.032182576,
            "lastEvaluation": "2021-04-21T11:07:36.194273271+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Volume占用CPU",
            "query": "gluster_cpu_percentage > 90",
            "duration": 600,
            "labels": {
              "alertname": "GlusterFS_Volume占用CPU",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 占用大量CPU,当前 {{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.cpu_percentage",
              "summary": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 占用大量CPU",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.087029473,
            "lastEvaluation": "2021-04-21T11:07:35.82926+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS_Volume占用内存",
            "query": "gluster_memory_percentage > 80",
            "duration": 600,
            "labels": {
              "alertname": "GlusterFS_Volume占用内存",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 占用大量内存,当前 {{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.memory_percentage",
              "summary": "GlusterFS主机 {{ $labels.instance }} 上 {{ $labels.volume}} 占用大量内存",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.089523157,
            "lastEvaluation": "2021-04-21T11:07:36.031674593+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS主进程状态",
            "query": "glusterfsd_process_status == 0",
            "duration": 60,
            "labels": {
              "alertname": "GlusterFS主进程状态",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS集群{{ $labels.instance }}主进程状态异常，状态{{ $value }}服务Down",
              "key": "storage.glusterfs.process_state",
              "summary": "GlusterFS集群{{ $labels.instance }}主进程状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006638303,
            "lastEvaluation": "2021-04-21T11:07:36.121204679+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS磁盘使用率",
            "query": "(gluster_device_free / gluster_device_size) * 100 < 10",
            "duration": 86400,
            "labels": {
              "alertname": "GlusterFS磁盘使用率",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS集群 {{ $labels.hostname }} 环境设备 {{ $labels.device }} 使用率过低,当前值{{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.disk_rate",
              "summary": "GlusterFS集群 {{ $labels.hostname }} 环境设备 {{ $labels.device }} 使用率过低",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006070058,
            "lastEvaluation": "2021-04-21T11:07:35.823187376+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "GlusterFS集群磁盘设备繁忙率",
            "query": "cloud_storage_disk_uitls > 90",
            "duration": 600,
            "labels": {
              "alertname": "GlusterFS集群磁盘设备繁忙率",
              "type": "storage.glusterfs"
            },
            "annotations": {
              "description": "GlusterFS主机 {{ $labels.instance}} 设备 {{ $labels.device }} 设备util过高,当前{{ $value | printf \"%.2f\" }}%",
              "key": "storage.glusterfs.disk_uitls_warning",
              "summary": "GlusterFS主机 {{ $labels.instance}} 设备 {{ $labels.device }} 设备util过高",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.007827849,
            "lastEvaluation": "2021-04-21T11:07:35.91629464+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      },
      {
        "name": "storage.rgw",
        "file": "/thanos-prometheus/config/rules/storage/rgw.rules",
        "rules": [
          {
            "state": "INACTIVE",
            "name": "RGW上行流量",
            "query": "sum by(host) (rate(nginx_vts_server_bytes_total{direction=\"out\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"}[1m])) / 1024 / 1024 > 1024",
            "duration": 120,
            "labels": {
              "alertname": "RGW上行流量",
              "type": "storage.rgw"
            },
            "annotations": {
              "description": "RGW请求 {{ $labels.host }} 站点上行流量异常,当前值{{ $value | printf \"%.2f\"  }}",
              "key": "storage.rgw.transmit",
              "summary": "RGW请求 {{ $labels.host }} 站点上行流量异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.005278111,
            "lastEvaluation": "2021-04-21T11:07:36.554908873+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "RGW下行流量",
            "query": "sum by(host) (rate(nginx_vts_server_bytes_total{direction=\"in\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"}[1m])) / 1024 / 1024 > 1024",
            "duration": 120,
            "labels": {
              "alertname": "RGW下行流量",
              "type": "storage.rgw"
            },
            "annotations": {
              "description": "RGW请求 {{ $labels.host }} 站点下行流量异常,当前值{{ $value | printf \"%.2f\"  }}",
              "key": "storage.rgw.receive",
              "summary": "RGW请求 {{ $labels.host }} 站点下行流量异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.002884903,
            "lastEvaluation": "2021-04-21T11:07:36.568892166+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "RGW响应耗时",
            "query": "nginx_vts_upstream_response_seconds{publicservice=\"cloud-rgw-gateway\"} > 1",
            "duration": 60,
            "labels": {
              "alertname": "RGW响应耗时",
              "type": "storage.rgw"
            },
            "annotations": {
              "description": "RGW后端 {{ $labels.backend }} 响应耗时异常，当前值{{ $value }}s",
              "key": "storage.rgw.response_seconds",
              "summary": "RGW后端 {{ $labels.backend }} 响应耗时异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.0024309,
            "lastEvaluation": "2021-04-21T11:07:36.566458232+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "RGW状态4xx",
            "query": "nginx_vts_server_requests_total{code=~\"4xx\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"} - nginx_vts_server_requests_total{code=~\"4xx\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"} offset 1m > 1000",
            "duration": 60,
            "labels": {
              "alertname": "RGW状态4xx",
              "type": "storage.rgw"
            },
            "annotations": {
              "description": "RGW请求 {{ $labels.host }} 站点4xx状态异常,当前值{{ $value }}",
              "key": "storage.rgw.4xx",
              "summary": "RGW请求 {{ $labels.host }} 站点4xx状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.006264903,
            "lastEvaluation": "2021-04-21T11:07:36.560190083+08:00",
            "type": "alerting"
          },
          {
            "state": "INACTIVE",
            "name": "RGW状态5xx",
            "query": "nginx_vts_server_requests_total{code=~\"5xx\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"} - nginx_vts_server_requests_total{code=~\"5xx\",host!=\"*\",publicservice=\"cloud-rgw-gateway\"} offset 1m > 0",
            "duration": 60,
            "labels": {
              "alertname": "RGW状态5xx",
              "type": "storage.rgw"
            },
            "annotations": {
              "description": "RGW请求 {{ $labels.host }} 站点5xx状态异常,当前值{{ $value }}",
              "key": "storage.rgw.5xx",
              "summary": "RGW请求 {{ $labels.host }} 站点5xx状态异常",
              "trigger": "{{ $value }}"
            },
            "alerts": [],
            "health": "ok",
            "evaluationTime": 0.004369821,
            "lastEvaluation": "2021-04-21T11:07:36.550535092+08:00",
            "type": "alerting"
          }
        ],
        "interval": 30,
        "evaluationTime": 0,
        "lastEvaluation": "0001-01-01T00:00:00Z",
        "partial_response_strategy": "WARN",
        "partialResponseStrategy": "ABORT"
      }
    ]
  }
}
